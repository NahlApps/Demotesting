<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="tokyo">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â€¢ Restaurant Menu | Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø·Ø¹Ù…</title>

  <!-- UI libs -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <!-- Arabic + Japanese fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800&family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet"/>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/intl-tel-input@24.4.0/build/css/intlTelInput.css" rel="stylesheet"/>

  <style>
  /* =========================================
     TOKYO NEON THEME â€” RESTAURANT MENU
     - Sections: Menu â†’ Cart â†’ Info â†’ Payment â†’ Review â†’ Done
     - RTL-first, mobile-first, glass cards
  ========================================= */
  :root{
    --neon-cyan:#00E5FF; --neon-magenta:#FF2DAE; --neon-purple:#7A5CFF;
    --pri:#22D3EE; --pri-2:#C026D3; --pri-3:#7C3AED;
    --surface:#0E1220; --elev:#151A2B; --paper:#fff; --paper-ink:#0E1320;
    --chip-bg:#1E2438; --chip-ink:#DDE6FF; --muted:#9CA3AF;
    --radius-md:14px; --shadow-sm:0 10px 24px rgba(0,0,0,.35); --shadow-md:0 24px 64px rgba(0,0,0,.45);
    --ease:cubic-bezier(.22,.61,.36,1); --dur-sm:220ms; --dur-md:420ms;
    --header-h:76px; --footer-h:118px;
    --input-bg: rgba(10,12,18,.90); --input-border: rgba(255,255,255,.22);
    --page-photo:url("https://images.unsplash.com/photo-1562158070-1d3b16c45653?q=80&w=1600&auto=format&fit=crop");
  }
  html,body{height:100%;min-height:100dvh;overflow-x:hidden}
  body{
    margin:0;color:#E9EDFF;font-family:'Cairo','Noto Sans JP',system-ui,Segoe UI,Roboto,Arial,sans-serif;
    background:
      radial-gradient(1200px 600px at 80% -10%, rgba(255,45,174,.25), transparent 60%),
      radial-gradient(900px 500px at -10% 110%, rgba(0,229,255,.20), transparent 55%);
    padding-block:var(--header-h) var(--footer-h); display:flex; flex-direction:column; isolation:isolate;
  }
  body::before{content:"";position:fixed;inset:0;z-index:-1;background:
    linear-gradient(180deg, rgba(0,229,255,.10), rgba(255,45,174,.10)),
    var(--page-photo) center/cover no-repeat;}
  body::after{content:"";position:fixed;inset:0;z-index:-1;pointer-events:none;background:
    radial-gradient(1200px 700px at 50% 0%, rgba(8,12,24,.25), transparent 60%),
    linear-gradient(180deg, rgba(8,12,24,.45), rgba(8,12,24,.65) 40%, rgba(8,12,24,.55) 100%);
  }

  /* Header */
  header{position:fixed;inset-block-start:0;inset-inline:0;z-index:30;background:
    linear-gradient(0deg, rgba(16,20,35,.94), rgba(16,20,35,.94)),
    radial-gradient(900px 500px at 90% -20%, rgba(192,38,211,.18), transparent 60%),
    radial-gradient(900px 500px at 10% 140%, rgba(34,211,238,.18), transparent 55%);
    border-bottom:1px solid rgba(255,255,255,.10);box-shadow:0 12px 30px rgba(0,0,0,.35);backdrop-filter:blur(8px)}
  .header-inner{max-width:1120px;margin:0 auto;padding:10px 12px;display:flex;align-items:center;gap:12px;justify-content:space-between}
  .brand{display:flex;align-items:center;gap:10px;padding:6px 10px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.12);box-shadow: inset 0 1px 0 rgba(255,255,255,.20), 0 8px 20px rgba(0,0,0,.35)}
  .brand img{height:64px;filter:drop-shadow(0 0 14px rgba(0,229,255,.55)) drop-shadow(0 0 10px rgba(255,45,174,.35))}
  .header-right{flex:1;display:flex;flex-direction:column;gap:6px}
  .mini-progress{display:flex;align-items:center;gap:10px}
  .mini-progress .bar{flex:1;height:8px;background:rgba(255,255,255,.12);border-radius:999px;overflow:hidden}
  .mini-progress .bar>span{height:100%;width:0%;background:linear-gradient(90deg, var(--pri), var(--pri-3), var(--pri-2));box-shadow:0 0 16px var(--pri), 0 0 24px var(--pri-2);transition:width var(--dur-md) var(--ease)}
  .mini-progress .step{font-weight:900;font-size:1rem;color:#fff}
  .summary-chips{display:flex;flex-wrap:wrap;gap:6px;align-items:center}
  .chip{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid rgba(255,255,255,.10);border-radius:999px;font-size:.85rem;background:linear-gradient(180deg, #1E2438, #161B2C);color:#DDE6FF;box-shadow:0 4px 10px rgba(0,0,0,.25)}
  .chip.current{ box-shadow:0 0 0 2px rgba(255,255,255,.25) inset, 0 0 14px rgba(0,229,255,.35) }

  main{flex:1 0 auto;display:flex;justify-content:center;padding:8px 12px 0}
  #app{width:100%;max-width:1120px}
  .stage{position:relative;min-height:560px;padding:8px 0 20px}
  .page{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;gap:18px;padding:20px 12px 28px;overflow:auto;opacity:0;transform:translateY(12px) scale(.992);pointer-events:none}
  .page.active{pointer-events:auto;animation:pageIn var(--dur-md) var(--ease) both}
  .page.exit{animation:pageOut var(--dur-sm) var(--ease) both}
  @keyframes pageIn{from{opacity:0;transform:translateY(12px) scale(.992)}to{opacity:1;transform:translateY(0) scale(1)}}
  @keyframes pageOut{from{opacity:1;transform:translateY(0) scale(1)}to{opacity:0;transform:translateY(14px) scale(.985)}}
  .page h1{font-family:'Cairo','Noto Sans JP',sans-serif;font-size:1.45rem;font-weight:900;margin:0;text-align:center;text-shadow:0 0 18px rgba(0,229,255,.35)}

  .card-glass{background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));color:#E9EDFF;border-radius:14px;box-shadow:var(--shadow-md);padding:16px 18px;width:100%;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.12)}
  .card-paper{background:linear-gradient(180deg, #fff, #F8FAFF);color:#0F172A;border-radius:14px;border:1px solid rgba(15,23,42,.12);box-shadow:0 8px 20px rgba(15,23,42,.08);padding:14px 16px}

  /* Filters row */
  .filters{display:grid;gap:10px;grid-template-columns:1fr}
  @media(min-width:768px){.filters{grid-template-columns:2fr 1fr 1fr}}
  .form-control, .select2-selection{background:var(--input-bg)!important;color:#fff!important;border:1px solid var(--input-border)!important;border-radius:12px!important;min-height:48px;text-align:center}
  .select2-container .select2-selection--single .select2-selection__rendered{color:#fff!important;line-height:48px!important}
  .select2-container .select2-selection--single{height:48px!important;display:flex;align-items:center}
  .select2-dropdown{background:#0B0D13!important;color:#fff!important;border:1px solid rgba(255,255,255,.16)!important;box-shadow:0 18px 40px rgba(0,0,0,.45)}

  /* Menu grid */
  .menu-grid{display:grid;gap:14px;grid-template-columns:repeat(1,minmax(0,1fr))}
  @media(min-width:560px){.menu-grid{grid-template-columns:repeat(2,1fr)}}
  @media(min-width:992px){.menu-grid{grid-template-columns:repeat(3,1fr)}}
  .dish{position:relative;display:flex;gap:12px;align-items:flex-start;padding:12px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));border:1px solid rgba(255,255,255,.12);box-shadow:0 8px 20px rgba(0,0,0,.2)}
  .thumb{width:88px;height:88px;flex:0 0 88px;border-radius:12px;overflow:hidden;background:#F2F5FF;border:1px solid #E2E8F0}
  .thumb img{width:100%;height:100%;object-fit:cover;display:block}
  .dish-body{flex:1 1 auto;min-width:0;text-align:right}
  .dish-title{font-weight:900;margin:0 0 4px}
  .dish-desc{color:#cbd5e1;font-size:.95rem;margin:0 0 6px;line-height:1.5}
  .dish-tags{display:flex;flex-wrap:wrap;gap:6px}
  .tag{background:#EEF2FF;color:#0F172A;border-radius:999px;padding:4px 8px;font-size:.78rem;white-space:nowrap}
  .dish-cta{display:flex;gap:8px;align-items:center;margin-top:8px;justify-content:flex-start}
  .qty{display:inline-flex;align-items:center;gap:8px;border:1px solid rgba(255,255,255,.16);border-radius:999px;padding:6px 10px}
  .btn-add{border:1px solid rgba(255,255,255,.16);border-radius:10px;min-height:40px;padding:8px 12px;background:linear-gradient(90deg, var(--pri), var(--pri-2));color:#0B0D13;font-weight:900}

  /* Cart drawer */
  .cart-drawer{position:fixed;inset-block:0;inset-inline-end:0;width:min(420px,92%);background:rgba(13,17,27,.95);backdrop-filter:blur(10px);box-shadow:-24px 0 60px rgba(0,0,0,.45);transform:translateX(110%);transition:transform var(--dur-md) var(--ease);z-index:50}
  .cart-drawer.open{transform:none}
  .cart-header{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.12)}
  .cart-body{padding:12px 14px;max-height:calc(100vh - 220px);overflow:auto}
  .cart-item{display:grid;grid-template-columns:56px 1fr auto;gap:10px;align-items:center;padding:8px 0;border-bottom:1px dashed rgba(255,255,255,.12)}
  .cart-thumb{width:56px;height:56px;border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,.12)}
  .cart-meta .title{font-weight:800}
  .cart-meta .note{font-size:.85rem;color:#cbd5e1}
  .price{font-weight:900}
  .cart-footer{position:absolute;inset-inline:0;inset-block-end:0;padding:12px 14px;border-top:1px solid rgba(255,255,255,.12);background:linear-gradient(0deg, rgba(16,20,35,.96), rgba(16,20,35,.92))}
  .line{display:flex;justify-content:space-between;align-items:center;padding:4px 0}
  .btn-wide{width:100%;border:1px solid rgba(255,255,255,.16);border-radius:12px;min-height:52px;font-weight:900}
  .btn-primary-grad{background:linear-gradient(90deg,var(--pri),var(--pri-3) 55%,var(--pri-2));color:#071018;border-color:transparent}

  /* Footer nav */
  footer.sticky-nav{position:sticky;bottom:0;z-index:40;background:linear-gradient(0deg, rgba(16,20,35,.96), rgba(16,20,35,.96));border-top:1px solid rgba(255,255,255,.10);backdrop-filter:blur(12px)}
  .footer-inner{max-width:1120px;margin:0 auto;padding:12px;display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
  .footer-actions{display:flex;gap:12px;width:100%}
  .btn-footer{flex:1;border:1px solid rgba(255,255,255,.16);border-radius:14px;padding:16px;min-height:56px;font-size:1rem;font-weight:900;background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));color:#fff}
  .btn-footer.primary{background:linear-gradient(90deg, var(--pri), var(--pri-3) 55%, var(--pri-2));color:#071018;border-color:transparent}
  .btn-footer.hidden{visibility:hidden}

  /* Info & payment */
  .form-label{display:inline-block;margin-bottom:6px;font-size:.9rem;font-weight:800;color:#D8DEFF}
  .field-error{color:#FF6B6B;font-size:.85rem;margin-top:6px;display:none}

  /* Review */
  .rv-line{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed rgba(255,255,255,.18)}

  /* Toast */
  #toastWrap{position:fixed;top:10px;left:50%;transform:translateX(-50%);z-index:1050;display:flex;flex-direction:column;gap:8px}
  </style>
</head>
<body>
  <div id="toastWrap"></div>
  <header id="siteHeader">
    <div class="header-inner">
      <div class="brand">
        <img src="https://images.unsplash.com/photo-1550547660-d9450f859349?w=300&auto=format&fit=crop" alt="Brand"/>
      </div>
      <div class="header-right">
        <div class="mini-progress" aria-hidden="true">
          <div class="bar"><span id="miniBarFill" style="width:0%"></span></div>
          <div class="step" id="miniStepTitle">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</div>
        </div>
        <div id="summaryChips" class="summary-chips" aria-live="polite"></div>
      </div>
      <button id="openCart" class="btn btn-sm btn-outline-light" type="button" title="Ø§Ù„Ø³Ù„Ø©"><i class="fa-solid fa-bag-shopping"></i></button>
    </div>
  </header>

  <main>
    <div id="app">
      <div class="stage">
        <!-- 1) Menu -->
        <section id="page1" class="page active" aria-label="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©">
          <h1>ğŸ± ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â€¢ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚</h1>
          <div class="card-glass">
            <div class="filters">
              <input id="search" class="form-control" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø¨Ù‚ / Search"/>
              <select id="category" style="width:100%"></select>
              <select id="diet" style="width:100%"></select>
            </div>
          </div>
          <div class="menu-grid" id="menuGrid"></div>
        </section>

        <!-- 2) Cart (inline summary page for Next) -->
        <section id="page2" class="page" aria-label="Ø§Ù„Ø³Ù„Ø©">
          <h1>ğŸ§º Ø§Ù„Ø³Ù„Ø© â€¢ ã‚«ãƒ¼ãƒˆ</h1>
          <div class="card-glass" id="cartSummary"></div>
        </section>

        <!-- 3) Customer info -->
        <section id="page3" class="page" aria-label="Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„">
          <h1>ğŸ‘¤ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ â€¢ ãŠå®¢æ§˜æƒ…å ±</h1>
          <div class="card-glass">
            <div class="row g-3">
              <div class="col-12 col-md-6">
                <label class="form-label" for="custName">Ø§Ù„Ø§Ø³Ù…</label>
                <input id="custName" class="form-control" placeholder="Ø§Ø³Ù…Ùƒ"/>
                <div class="field-error" id="err-name">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…</div>
              </div>
              <div class="col-12 col-md-6">
                <label class="form-label" for="custPhone">Ø§Ù„Ø¬ÙˆØ§Ù„</label>
                <input id="custPhone" type="tel" class="form-control" placeholder="5XXXXXXXX"/>
                <div class="field-error" id="err-phone">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ØµØ­ÙŠØ­</div>
              </div>
              <div class="col-12 col-md-6">
                <label class="form-label" for="orderType">Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨</label>
                <select id="orderType" style="width:100%">
                  <option value="delivery">ØªÙˆØµÙŠÙ„</option>
                  <option value="pickup">Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø·Ø¹Ù…</option>
                </select>
              </div>
              <div class="col-12 col-md-6" id="addressWrap">
                <label class="form-label" for="address">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
                <input id="address" class="form-control" placeholder="Ø§Ù„Ø­ÙŠØŒ Ø§Ù„Ø´Ø§Ø±Ø¹ØŒ Ø±Ù‚Ù… Ø§Ù„Ù…Ø¨Ù†Ù‰"/>
                <div class="field-error" id="err-address">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù„Ù„ØªÙˆØµÙŠÙ„</div>
              </div>
              <div class="col-12">
                <label class="form-label" for="notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
                <textarea id="notes" class="form-control" rows="3" placeholder="Ø¨Ø¯ÙˆÙ† Ø¨ØµÙ„ØŒ Ø¯Ø±Ø¬Ø© Ø­Ø§Ø±ØŒ Ø¥Ù„Ø®"></textarea>
              </div>
            </div>
          </div>
        </section>

        <!-- 4) Payment -->
        <section id="page4" class="page" aria-label="Ø§Ù„Ø¯ÙØ¹">
          <h1>ğŸ’³ Ø§Ù„Ø¯ÙØ¹ â€¢ ãŠæ”¯æ‰•ã„</h1>
          <div class="card-glass">
            <div class="row g-3">
              <div class="col-12 col-md-4">
                <label class="form-label">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>
                <select id="payMethod" style="width:100%">
                  <option value="mada">Ù…Ø¯Ù‰</option>
                  <option value="cash">Ù†Ù‚Ø¯Ù‹Ø§</option>
                  <option value="stc">STC Pay</option>
                </select>
                <div class="field-error" id="err-pay">Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</div>
              </div>
              <div class="col-12 col-md-8">
                <div class="alert alert-info" style="background:rgba(0,229,255,.08);color:#E9EDFF;border:1px solid rgba(0,229,255,.25)">Ù‚Ø¯ ØªÙ†Ø·Ø¨Ù‚ Ø±Ø³ÙˆÙ… ØªÙˆØµÙŠÙ„. Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ØªØ´Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø¥Ù† ÙˆØ¬Ø¯Øª.</div>
              </div>
            </div>
          </div>
        </section>

        <!-- 5) Review -->
        <section id="page5" class="page" aria-label="Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨">
          <h1>ğŸ” Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨ â€¢ æœ€çµ‚ç¢ºèª</h1>
          <div class="card-glass" id="reviewBox"></div>
        </section>

        <!-- 6) Done -->
        <section id="page6" class="page" aria-label="ØªÙ…">
          <h1>ğŸŒ¸ ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ â€¢ Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ…</h1>
          <div class="card-glass text-center" style="max-width:720px">
            <p class="mb-3">ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨ÙƒÙ…. Ø³Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ù‚Ø±ÙŠØ¨Ù‹Ø§ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨.</p>
            <div class="d-flex gap-2 justify-content-center flex-wrap">
              <a id="shareWA" class="btn btn-success" target="_blank" rel="noopener"><i class="fa-brands fa-whatsapp"></i> Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ù„Ø®Øµ</a>
              <button id="newOrder" class="btn btn-primary" type="button">ğŸ” Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</button>
            </div>
          </div>
        </section>
      </div>
    </div>
  </main>

  <footer id="siteFooter" class="sticky-nav" aria-label="Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø®Ø·ÙˆØ§Øª">
    <div class="footer-inner">
      <div class="footer-actions">
        <button id="footer-prev" type="button" class="btn-footer hidden">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        <button id="footer-next" type="button" class="btn-footer primary disabled" disabled>Ø§Ù„ØªØ§Ù„ÙŠ</button>
      </div>
    </div>
  </footer>

  <!-- Cart Drawer -->
  <aside id="cartDrawer" class="cart-drawer" aria-label="Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª" aria-hidden="true">
    <div class="cart-header">
      <strong>Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ â€¢ ã‚«ãƒ¼ãƒˆ</strong>
      <button id="closeCart" class="btn btn-sm btn-outline-light" type="button"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div id="cartItems" class="cart-body"></div>
    <div class="cart-footer">
      <div class="line"><span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ</span><strong id="subTotal">â€”</strong></div>
      <div class="line"><span>Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</span><strong id="vat">â€”</strong></div>
      <div class="line"><span>Ø§Ù„ØªÙˆØµÙŠÙ„</span><strong id="deliveryFee">â€”</strong></div>
      <div class="line" style="border-top:1px solid rgba(255,255,255,.12);margin-top:6px;padding-top:8px"><span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span><strong id="grandTotal">â€”</strong></div>
      <button id="goCheckout" class="btn-wide btn-primary-grad mt-2" type="button">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡</button>
    </div>
  </aside>

  <!-- libs -->
  <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@24.4.0/build/js/intlTelInputWithUtils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
  // -------- Helpers / Currency / Toast --------
  const SAR = new Intl.NumberFormat('ar-SA',{style:'currency',currency:'SAR'});
  function showToast(type='info', msg=''){
    const wrap=document.getElementById('toastWrap');
    const div=document.createElement('div');
    div.style.minWidth='260px';div.style.color='#fff';div.style.padding='10px 14px';
    div.style.borderRadius='10px';div.style.boxShadow='var(--shadow-md)';
    div.style.background= type==='error'? '#dc2626' : type==='success'? '#16a34a' : '#0284c7';
    div.textContent=msg;wrap.appendChild(div);
    setTimeout(()=>{div.style.opacity='0';div.style.transform='translateY(-6px)';setTimeout(()=>div.remove(),180)},2200);
  }

  // -------- Data (mock menu) --------
  const MENU=[
    {id:'101', title:'Ø±Ø§Ù…Ù† ØªØ§Ù†ØªØ§Ù†', desc:'Ù…Ø±Ù‚ Ø­Ø§Ø± ØºÙ†ÙŠ + Ù„Ø­Ù… Ù…ÙØ±ÙˆÙ…', price:36, img:'https://images.unsplash.com/photo-1617195737496-7e0b1e0fd2aa?w=600', cat:'Ù†ÙˆØ¯Ù„Ø²', diet:['Ø­Ø§Ø±']},
    {id:'102', title:'Ø±Ø§Ù…Ù† Ù…ÙŠØ²Ùˆ', desc:'Ù…Ø±Ù‚ Ù…ÙŠØ²Ùˆ Ù…Ø¹ Ø°Ø±Ø© ÙˆØ²Ø¨Ø¯Ø©', price:34, img:'https://images.unsplash.com/photo-1547592166-23ac45744acd?w=600', cat:'Ù†ÙˆØ¯Ù„Ø²', diet:[]},
    {id:'201', title:'Ø³ÙˆØ´ÙŠ Ø³Ø§Ù„Ù…ÙˆÙ†', desc:'6 Ù‚Ø·Ø¹ Ø³Ø§Ù„Ù…ÙˆÙ† Ø·Ø§Ø²Ø¬', price:42, img:'https://images.unsplash.com/photo-1580828343064-fde4fc206bc6?w=600', cat:'Ø³ÙˆØ´ÙŠ', diet:['Ø¨Ø­Ø±ÙŠ']},
    {id:'202', title:'Ø³ÙˆØ´ÙŠ ØªÙˆÙ†Ø§', desc:'6 Ù‚Ø·Ø¹ ØªÙˆÙ†Ø§ Ù…Ù…ÙŠØ²Ø©', price:44, img:'https://images.unsplash.com/photo-1607301405390-1b9f2b805d6e?w=600', cat:'Ø³ÙˆØ´ÙŠ', diet:['Ø¨Ø­Ø±ÙŠ']},
    {id:'301', title:'Ø¯Ù…Ø¨Ù„Ù†Øº Ø®Ø¶Ø§Ø±', desc:'Ù…Ù‚Ù„ÙŠ Ø®ÙÙŠÙ Ù…Ø¹ ØµÙˆØµ', price:22, img:'https://images.unsplash.com/photo-1544025162-d76694265947?w=600', cat:'Ù…Ù‚Ø¨Ù„Ø§Øª', diet:['Ù†Ø¨Ø§ØªÙŠ']},
    {id:'401', title:'Ø´Ø§ÙŠ Ù…Ø§ØªØ´Ø§', desc:'Ù…Ø§ØªØ´Ø§ ÙŠØ§Ø¨Ø§Ù†ÙŠ', price:12, img:'https://images.unsplash.com/photo-1553456558-aff63285bdd1?w=600', cat:'Ù…Ø´Ø±ÙˆØ¨Ø§Øª', diet:[]},
  ];
  const CATS=[...new Set(MENU.map(m=>m.cat))];
  const DIETS=[...new Set(MENU.flatMap(m=>m.diet))];

  // -------- State --------
  const orderedPages=["page1","page2","page3","page4","page5","page6"];
  const STEPS_LABELS=["Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©","Ø§Ù„Ø³Ù„Ø©","Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª","Ø§Ù„Ø¯ÙØ¹","Ù…Ø±Ø§Ø¬Ø¹Ø©","ØªÙ…"];
  const cart=new Map(); // id -> {item, qty}
  let itiPhone=null;
  const order={
    type:'delivery', name:'', phone:'', address:'', notes:'', pay:'',
  };

  // -------- Init --------
  $(function(){
    // Select2
    $('#category').select2({width:'100%',dir:'rtl',placeholder:'Ø§Ù„ØªØµÙ†ÙŠÙ'});
    $('#diet').select2({width:'100%',dir:'rtl',placeholder:'Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØºØ°Ø§Ø¦ÙŠ'});
    $('#orderType').select2({width:'100%',dir:'rtl'});
    $('#payMethod').select2({width:'100%',dir:'rtl'});

    // Options
    $('#category').empty().append(new Option('Ø§Ù„ÙƒÙ„','all',true,true));
    CATS.forEach(c=>$('#category').append(new Option(c,c,false,false)));
    $('#diet').empty().append(new Option('Ø§Ù„ÙƒÙ„','all',true,true));
    DIETS.forEach(d=>$('#diet').append(new Option(d,d,false,false)));

    // Phone input
    itiPhone=window.intlTelInput(document.querySelector('#custPhone'), { initialCountry:'sa', onlyCountries:['sa','ae','bh','kw','om','qa'], separateDialCode:true });

    // Events
    $('#search').on('input', renderMenu);
    $('#category').on('change', renderMenu);
    $('#diet').on('change', renderMenu);
    $('#orderType').on('change', function(){ order.type=this.value; $('#addressWrap').toggle(this.value==='delivery'); updateNextAvailability();});
    $('#custName').on('input', function(){ order.name=this.value.trim(); updateSummary(); updateNextAvailability();});
    $('#address').on('input', function(){ order.address=this.value.trim(); updateNextAvailability();});
    $('#notes').on('input', function(){ order.notes=this.value;});
    $('#payMethod').on('change', function(){ order.pay=this.value; updateSummary(); updateNextAvailability();});

    // Footer nav
    document.getElementById('footer-next').addEventListener('click', gotoNext);
    document.getElementById('footer-prev').addEventListener('click', ()=>{ const i=getActiveIndex(); showPage(Math.max(i-1,0)); });

    // Cart drawer
    $('#openCart').on('click', ()=>toggleCart(true));
    $('#closeCart').on('click', ()=>toggleCart(false));
    $('#goCheckout').on('click', ()=>{ toggleCart(false); showPage(2); });

    // Done actions
    $('#newOrder').on('click', ()=>location.reload());

    // Initial
    renderMenu(); updateSummary(); syncProgress(0); updateNextAvailability();
  });

  // -------- Rendering Menu --------
  function renderMenu(){
    const q=($('#search').val()||'').toLowerCase();
    const c=$('#category').val()||'all';
    const d=$('#diet').val()||'all';
    const grid=document.getElementById('menuGrid');
    grid.innerHTML='';
    const list=MENU.filter(m=>
      (c==='all'||m.cat===c) &&
      (d==='all'||m.diet.includes(d)) &&
      (m.title.toLowerCase().includes(q) || m.desc.toLowerCase().includes(q))
    );
    if(!list.length){ grid.innerHTML='<div class="card-paper text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù…Ø·Ø§Ø¨Ù‚Ø©</div>'; return; }
    list.forEach(m=>grid.appendChild(dishCard(m)));
  }
  function dishCard(m){
    const wrap=document.createElement('div'); wrap.className='dish';
    wrap.innerHTML=`
      <div class="thumb">${m.img?`<img src="${m.img}" alt="${m.title}" loading="lazy">`:''}</div>
      <div class="dish-body">
        <div class="dish-title">${m.title}</div>
        <p class="dish-desc">${m.desc||''}</p>
        <div class="dish-tags">
          <span class="tag">${SAR.format(m.price)}</span>
          <span class="tag">${m.cat}</span>
          ${(m.diet||[]).map(t=>`<span class="tag">${t}</span>`).join('')}
        </div>
        <div class="dish-cta">
          <div class="qty" data-id="${m.id}">
            <button class="btn btn-sm btn-outline-light" data-act="dec" type="button">âˆ’</button>
            <span class="qv">1</span>
            <button class="btn btn-sm btn-outline-light" data-act="inc" type="button">ï¼‹</button>
          </div>
          <button class="btn-add" data-add="${m.id}"><i class="fa-solid fa-plus"></i> Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
        </div>
      </div>`;
    const qtyBox=wrap.querySelector('.qty');
    qtyBox.addEventListener('click', (e)=>{
      const act=e.target.closest('button')?.dataset?.act; if(!act) return;
      const vEl=qtyBox.querySelector('.qv'); let v=parseInt(vEl.textContent||'1',10);
      v = act==='inc'? Math.min(v+1,99) : Math.max(v-1,1); vEl.textContent=v;
    });
    wrap.querySelector('[data-add]')?.addEventListener('click',()=>{
      const qty=parseInt(qtyBox.querySelector('.qv').textContent||'1',10);
      addToCart(m, qty);
    });
    return wrap;
  }

  // -------- Cart --------
  function addToCart(item, qty){
    const row=cart.get(item.id) || { item, qty:0 };
    row.qty += qty; cart.set(item.id,row);
    showToast('success', `Ø£Ø¶ÙŠÙ ${item.title} Ã—${qty}`);
    renderCart(); updateSummary(); updateNextAvailability();
  }
  function removeFromCart(id){ cart.delete(id); renderCart(); updateSummary(); updateNextAvailability(); }
  function setQty(id, q){ const row=cart.get(id); if(!row) return; row.qty=Math.max(1,Math.min(99,q)); renderCart(); updateSummary(); updateNextAvailability(); }
  function cartTotals(){
    let sub=0; cart.forEach(r=>{ sub += r.item.price * r.qty; });
    const vat=sub*0.15; const delivery = (order.type==='delivery' && sub>0)? 10 : 0;
    const grand=sub+vat+delivery; return {sub, vat, delivery, grand};
  }
  function renderCart(){
    const body=document.getElementById('cartItems'); body.innerHTML='';
    if(cart.size===0){ body.innerHTML='<div class="text-center text-muted">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</div>'; }
    cart.forEach(({item,qty})=>{
      const row=document.createElement('div'); row.className='cart-item';
      row.innerHTML=`
        <div class="cart-thumb">${item.img?`<img src="${item.img}" alt="${item.title}" style="width:100%;height:100%;object-fit:cover">`:''}</div>
        <div class="cart-meta">
          <div class="title">${item.title}</div>
          <div class="note">${SAR.format(item.price)} Ã—
            <button class="btn btn-xs btn-outline-light" data-act="dec" type="button">âˆ’</button>
            <span class="mx-1">${qty}</span>
            <button class="btn btn-xs btn-outline-light" data-act="inc" type="button">ï¼‹</button>
          </div>
        </div>
        <div class="price">${SAR.format(item.price*qty)}<div><button class="btn btn-sm btn-link text-danger" data-remove>Ø­Ø°Ù</button></div></div>`;
      row.querySelector('[data-remove]')?.addEventListener('click', ()=>removeFromCart(item.id));
      row.querySelector('[data-act="dec"]').addEventListener('click', ()=>setQty(item.id, qty-1));
      row.querySelector('[data-act="inc"]').addEventListener('click', ()=>setQty(item.id, qty+1));
      body.appendChild(row);
    });
    const t=cartTotals();
    document.getElementById('subTotal').textContent=SAR.format(t.sub);
    document.getElementById('vat').textContent=SAR.format(t.vat);
    document.getElementById('deliveryFee').textContent=SAR.format(t.delivery);
    document.getElementById('grandTotal').textContent=SAR.format(t.grand);
  }
  function toggleCart(open){ const el=document.getElementById('cartDrawer'); el.classList.toggle('open', !!open); el.setAttribute('aria-hidden', open? 'false':'true'); if(open) renderCart(); }

  // -------- Footer / Steps --------
  function getActiveIndex(){ const id=document.querySelector('.page.active')?.id; return Math.max(0, orderedPages.indexOf(id)); }
  function syncProgress(i){
    const pct=((i+1)/orderedPages.length)*100;
    document.getElementById('miniBarFill').style.width=pct+'%';
    document.getElementById('miniStepTitle').textContent=STEPS_LABELS[Math.min(i,STEPS_LABELS.length-1)];
    const prev=document.getElementById('footer-prev'); const next=document.getElementById('footer-next');
    const onThanks=(orderedPages[i]==='page6');
    prev.classList.toggle('hidden', i===0 || onThanks);
    next.classList.toggle('hidden', onThanks);
    next.textContent = (orderedPages[i]==='page5'? 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨' : 'Ø§Ù„ØªØ§Ù„ÙŠ');
  }
  function showPage(idx){
    const cur=document.querySelector('.page.active');
    const next=document.getElementById(orderedPages[idx]); if(!next||cur===next) return;
    if(cur){cur.classList.remove('active');cur.classList.add('exit');}
    next.style.display='flex'; requestAnimationFrame(()=>{ next.classList.add('active'); setTimeout(()=>{ if(cur){cur.classList.remove('exit'); cur.style.display='none';} }, 240); });
    syncProgress(idx); updateSummary(); updateNextAvailability();
    if(next.id==='page2') renderCartSummary();
    if(next.id==='page5') renderReview();
  }
  function updateNextAvailability(){
    const i=getActiveIndex(); const nextBtn=document.getElementById('footer-next'); let enable=true;
    if(i===0){ enable = cart.size>0; }
    else if(i===1){ enable = cart.size>0; }
    else if(i===2){
      const nameOk=($('#custName').val()||'').trim().length>0;
      const phoneOk = itiPhone && itiPhone.isValidNumber();
      const addrOk = ($('#orderType').val()==='pickup') || (($('#address').val()||'').trim().length>4);
      enable = nameOk && phoneOk && addrOk;
      $('#err-name').toggle(!nameOk); $('#err-phone').toggle(!phoneOk); $('#err-address').toggle(!addrOk && $('#orderType').val()==='delivery');
    }
    else if(i===3){ enable = !!($('#payMethod').val()); $('#err-pay').toggle(!enable); }
    else if(i===4){ enable = true; }
    nextBtn.disabled=!enable; nextBtn.classList.toggle('disabled',!enable);
  }
  async function gotoNext(){
    const i=getActiveIndex(); const id=orderedPages[i];
    if(id==='page1'){ showPage(1); return; }
    if(id==='page2'){ showPage(2); return; }
    if(id==='page3'){ order.name=$('#custName').val().trim(); order.phone = itiPhone.getNumber().replace(/^\+/,''); order.address=$('#address').val().trim(); showPage(3); return; }
    if(id==='page4'){ order.pay=$('#payMethod').val(); showPage(4); return; }
    if(id==='page5'){ // submit
      fakeSubmit(); return;
    }
    showPage(Math.min(i+1, orderedPages.length-1));
  }

  // -------- Chips / Summary --------
  function updateSummary(){
    const wrap=document.getElementById('summaryChips'); if(!wrap) return;
    const i=getActiveIndex(); wrap.innerHTML=''; if(i===0) return;
    const cartCount=[...cart.values()].reduce((s,r)=>s+r.qty,0);
    const t=cartTotals();
    const chips=[
      {i:'fa-bag-shopping',t:'Ø§Ù„Ø¹Ù†Ø§ØµØ±',v:String(cartCount)},
      {i:'fa-sack-dollar',t:'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ',v:SAR.format(t.grand)},
      {i:'fa-user',t:'Ø§Ù„Ø¹Ù…ÙŠÙ„',v:(order.name||'')},
      {i:'fa-truck',t:'Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨',v:(order.type==='delivery'?'ØªÙˆØµÙŠÙ„':'Ø§Ø³ØªÙ„Ø§Ù…')},
      {i:'fa-credit-card',t:'Ø§Ù„Ø¯ÙØ¹',v:(order.pay||'')},
    ];
    chips.filter(c=>c.v).forEach((c,idx)=>{
      const el=document.createElement('div'); el.className='chip'+(idx===chips.length-1?' current':'');
      el.innerHTML=`<i class="fa-solid ${c.i}"></i><span class="title">${c.t}:</span><span class="value">${c.v}</span>`; wrap.appendChild(el);
    });
  }

  // -------- Cart summary page --------
  function renderCartSummary(){
    const box=document.getElementById('cartSummary');
    if(cart.size===0){ box.innerHTML='<div class="text-center">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</div>'; return; }
    let html=''; cart.forEach(({item,qty})=>{
      html+=`<div class="rv-line"><span>${item.title} Ã— ${qty}</span><strong>${SAR.format(item.price*qty)}</strong></div>`;
    });
    const t=cartTotals();
    html+=`<div class="rv-line"><span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ</span><strong>${SAR.format(t.sub)}</strong></div>`;
    html+=`<div class="rv-line"><span>Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</span><strong>${SAR.format(t.vat)}</strong></div>`;
    html+=`<div class="rv-line"><span>Ø§Ù„ØªÙˆØµÙŠÙ„</span><strong>${SAR.format(t.delivery)}</strong></div>`;
    html+=`<div class="rv-line" style="border-top:1px solid rgba(255,255,255,.18);margin-top:6px;padding-top:10px"><span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span><strong>${SAR.format(t.grand)}</strong></div>`;
    box.innerHTML=html;
  }

  // -------- Review --------
  function renderReview(){
    const box=document.getElementById('reviewBox');
    let html='<div class="mb-2 text-muted">Ø±Ø§Ø¬Ø¹ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø«Ù… Ø§Ø¶ØºØ· \"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨\"</div>';
    cart.forEach(({item,qty})=>{ html+=`<div class="rv-line"><span>${item.title} Ã— ${qty}</span><strong>${SAR.format(item.price*qty)}</strong></div>`; });
    const t=cartTotals();
    html+=`<div class="rv-line"><span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span><strong>${SAR.format(t.grand)}</strong></div>`;
    html+=`<div class="rv-line"><span>Ø§Ù„Ø§Ø³Ù…</span><strong>${order.name||'â€”'}</strong></div>`;
    html+=`<div class="rv-line"><span>Ø§Ù„Ø¬ÙˆØ§Ù„</span><strong>${order.phone||'â€”'}</strong></div>`;
    html+=`<div class="rv-line"><span>Ø§Ù„Ù†ÙˆØ¹</span><strong>${order.type==='delivery'?'ØªÙˆØµÙŠÙ„':'Ø§Ø³ØªÙ„Ø§Ù…'}</strong></div>`;
    if(order.type==='delivery') html+=`<div class="rv-line"><span>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</span><strong>${order.address||'â€”'}</strong></div>`;
    if(order.notes) html+=`<div class="rv-line"><span>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</span><strong>${order.notes}</strong></div>`;
    html+=`<div class="d-flex gap-2 flex-wrap mt-3">
      <button class="btn btn-outline-secondary" type="button" onclick="showPage(0)">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
      <button class="btn btn-outline-secondary" type="button" onclick="showPage(2)">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
      <button id="confirmOrder" class="btn btn-primary ms-auto" type="button">âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>
    </div>`;
    box.innerHTML=html;
    document.getElementById('confirmOrder').addEventListener('click', fakeSubmit);
  }

  // -------- Submit (fake demo) --------
  function fakeSubmit(){
    // Validation guard
    if(cart.size===0){ showToast('error','Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©'); return; }
    if(!order.name || !(itiPhone && itiPhone.isValidNumber())){ showToast('error','Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥ÙƒÙ…Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„'); return; }
    if(order.type==='delivery' && !order.address){ showToast('error','Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù„Ù„ØªÙˆØµÙŠÙ„'); return; }
    if(!order.pay){ showToast('error','Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹'); return; }

    // Success â†’ Done page + WhatsApp share
    const t=cartTotals();
    const lines=[]; cart.forEach(({item,qty})=>lines.push(`${item.title} Ã— ${qty} = ${SAR.format(item.price*qty)}`));
    const msg=encodeURIComponent([
      'Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯:',
      ...lines,
      `Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${SAR.format(t.grand)}`,
      `Ø§Ù„Ø§Ø³Ù…: ${order.name}`,
      `Ø§Ù„Ø¬ÙˆØ§Ù„: ${order.phone}`,
      `Ø§Ù„Ù†ÙˆØ¹: ${order.type==='delivery'?'ØªÙˆØµÙŠÙ„':'Ø§Ø³ØªÙ„Ø§Ù…'}`,
      order.type==='delivery' ? `Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${order.address}` : '',
      order.notes? `Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ${order.notes}` : ''
    ].filter(Boolean).join('\n'));
    document.getElementById('shareWA').href=`https://wa.me/?text=${msg}`;
    showPage(5);
  }
  </script>
</body>
</html>
