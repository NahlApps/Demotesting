<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>

  <title>Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ â€¢ Sponge &amp; Soap</title>
  <meta name="title" content="Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ â€¢ Sponge &amp; Soap"/>
  <meta name="description" content="Ø§Ø­Ø¬Ø² ØºØ³ÙŠÙ„ Ø³ÙŠØ§Ø±ØªÙƒ Ù…Ø¹ Sponge &amp; Soap Ø¨Ø³Ù‡ÙˆÙ„Ø©ØŒ ÙˆØ·Ø¨Ù‘Ù‚ ÙƒÙˆØ¨ÙˆÙ† Ø§Ù„Ø®ØµÙ… Ù‚Ø¨Ù„ Ø§Ù„Ø¯ÙØ¹."/>

  <meta name="theme-color" content="#0f172a"/>

  <!-- Google Font (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #0f172a;
      --card: #ffffff;
      --accent: #0ea5e9;
      --accent-soft: rgba(14,165,233,0.12);
      --accent-strong: #0284c7;
      --danger: #ef4444;
      --danger-soft: rgba(239,68,68,0.08);
      --success: #16a34a;
      --success-soft: rgba(22,163,74,0.08);
      --text-main: #0f172a;
      --text-muted: #6b7280;
      --border-subtle: #e5e7eb;
      --radius-xl: 18px;
      --shadow-soft: 0 18px 40px rgba(15,23,42,0.18);
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      font-family: "Tajawal", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1e293b 0, #020617 55%, #000 100%);
      color: #f9fafb;
      min-height: 100vh;
    }

    body {
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 18px;
    }

    .page {
      max-width: 1000px;
      width: 100%;
      margin: auto;
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2.2fr);
      gap: 18px;
    }

    @media (max-width: 880px) {
      .page {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .hero-card,
    .booking-card {
      background: radial-gradient(circle at top left, #0b1120 0, #020617 55%, #000 100%);
      border-radius: 26px;
      border: 1px solid rgba(148,163,184,0.24);
      box-shadow: 0 30px 80px rgba(15,23,42,0.65);
      padding: 20px 22px 22px;
      position: relative;
      overflow: hidden;
    }

    .hero-card::before {
      content: "";
      position: absolute;
      inset: -120px;
      background:
        radial-gradient(circle at top right, rgba(56,189,248,0.22) 0, transparent 50%),
        radial-gradient(circle at bottom left, rgba(56,189,248,0.14) 0, transparent 52%);
      opacity: 0.85;
      pointer-events: none;
    }

    .hero-inner {
      position: relative;
      z-index: 1;
    }

    .logo-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15,23,42,0.82);
      border: 1px solid rgba(148,163,184,0.4);
      color: #e5e7eb;
      font-size: 11px;
      margin-bottom: 12px;
    }

    .logo-pill span.icon {
      display: inline-flex;
      width: 18px;
      height: 18px;
      border-radius: 999px;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle, #38bdf8 0, #1d4ed8 60%, #0f172a 100%);
      color: #f8fafc;
      font-size: 13px;
    }

    h1 {
      margin: 0 0 8px;
      font-size: 26px;
      color: #f9fafb;
      letter-spacing: 0.02em;
    }

    .hero-sub {
      margin: 0 0 16px;
      color: #cbd5f5;
      font-size: 14px;
      line-height: 1.6;
    }

    .hero-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 14px;
    }

    .hero-badge {
      font-size: 11px;
      padding: 5px 10px;
      border-radius: 999px;
      background: rgba(15,23,42,0.78);
      border: 1px solid rgba(148,163,184,0.35);
      color: #e5e7eb;
    }

    .hero-highlight {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 14px;
      background: rgba(15,23,42,0.88);
      border: 1px solid rgba(56,189,248,0.55);
      color: #e0f2fe;
      font-size: 12px;
      margin-bottom: 12px;
    }

    .hero-highlight strong {
      color: #7dd3fc;
      font-weight: 600;
    }

    .hero-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
      margin-top: 6px;
    }

    .hero-stat {
      padding: 7px 8px;
      border-radius: 14px;
      background: rgba(15,23,42,0.92);
      border: 1px solid rgba(148,163,184,0.4);
      font-size: 11px;
      color: #e5e7eb;
    }

    .hero-stat strong {
      display: block;
      font-size: 13px;
      color: #facc15;
    }

    /* Booking card */
    .booking-card {
      background: #020617;
    }

    .booking-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      margin-bottom: 10px;
    }

    .booking-title {
      font-size: 18px;
      font-weight: 600;
      color: #e5e7eb;
    }

    .booking-sub {
      font-size: 11px;
      color: #9ca3af;
    }

    .step-tag {
      font-size: 10px;
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.4);
      color: #e5e7eb;
    }

    .form-grid {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 10px;
      margin-bottom: 10px;
    }

    @media (max-width: 640px) {
      .form-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 12px;
    }

    .field label {
      color: #e5e7eb;
      font-weight: 500;
    }

    .field label span.req {
      color: #f97316;
      margin-inline-start: 3px;
    }

    .input,
    select {
      border-radius: 12px;
      border: 1px solid rgba(148,163,184,0.6);
      padding: 7px 10px;
      background: rgba(15,23,42,0.9);
      color: #f9fafb;
      font-size: 13px;
      outline: none;
      transition: border-color 0.15s, box-shadow 0.15s, background 0.15s;
      width: 100%;
    }

    .input::placeholder {
      color: #6b7280;
    }

    .input:focus,
    select:focus {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56,189,248,0.6);
      background: rgba(15,23,42,0.98);
    }

    select {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      background-image: linear-gradient(45deg, transparent 50%, #9ca3af 50%), 
                        linear-gradient(135deg, #9ca3af 50%, transparent 50%);
      background-position: calc(100% - 14px) 11px, calc(100% - 9px) 11px;
      background-size: 5px 5px, 5px 5px;
      background-repeat: no-repeat;
    }

    .help-text {
      font-size: 10px;
      color: #9ca3af;
    }

    /* Coupon section */
    .coupon-box {
      margin-top: 4px;
      padding: 9px 10px;
      border-radius: 16px;
      background: rgba(15,23,42,0.92);
      border: 1px dashed rgba(56,189,248,0.7);
    }

    .coupon-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      margin-bottom: 8px;
    }

    .coupon-header span {
      font-size: 12px;
      color: #e5e7eb;
      font-weight: 500;
    }

    .coupon-row {
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) auto;
      gap: 6px;
    }

    .coupon-input {
      border-radius: 999px;
    }

    .btn {
      border-radius: 999px;
      border: none;
      padding: 7px 14px;
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
      color: #0b1120;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      box-shadow: 0 12px 30px rgba(56,189,248,0.45);
      transition: transform 0.1s ease, box-shadow 0.1s ease, filter 0.1s ease;
      white-space: nowrap;
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    .btn:hover:not(:disabled) {
      filter: brightness(1.05);
      transform: translateY(-1px);
      box-shadow: 0 16px 38px rgba(56,189,248,0.6);
    }

    .btn-secondary {
      background: rgba(15,23,42,0.98);
      color: #e5e7eb;
      border: 1px solid rgba(148,163,184,0.7);
      box-shadow: none;
    }

    .btn-secondary:hover:not(:disabled) {
      border-color: #38bdf8;
      box-shadow: 0 10px 28px rgba(15,23,42,0.9);
    }

    .coupon-status {
      margin-top: 6px;
      font-size: 11px;
      min-height: 16px;
    }

    .status-ok {
      color: var(--success);
    }

    .status-error {
      color: var(--danger);
    }

    .status-muted {
      color: #9ca3af;
    }

    /* Summary box */
    .summary-box {
      margin-top: 10px;
      padding: 10px 11px;
      border-radius: 18px;
      background: rgba(15,23,42,0.96);
      border: 1px solid rgba(148,163,184,0.6);
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
      margin-bottom: 4px;
      color: #e5e7eb;
    }

    .summary-row.muted {
      font-size: 12px;
      color: #9ca3af;
    }

    .summary-row.total {
      font-weight: 700;
      font-size: 15px;
      margin-top: 4px;
      padding-top: 6px;
      border-top: 1px dashed rgba(148,163,184,0.6);
      color: #fbbf24;
    }

    .summary-row .price {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    .pill-note {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      margin-top: 5px;
      padding: 5px 8px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.45);
      color: #9ca3af;
    }

    /* Footer actions */
    .footer-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-top: 12px;
    }

    .footer-actions .left {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .small-label {
      font-size: 10px;
      color: #9ca3af;
    }

    .safe-text {
      font-size: 10px;
      color: #6b7280;
    }

    .toast {
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: #0b1120;
      color: #e5e7eb;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      font-size: 11px;
      display: none;
      align-items: center;
      gap: 6px;
      box-shadow: 0 14px 32px rgba(15,23,42,0.85);
      z-index: 50;
    }

    .toast.show {
      display: inline-flex;
      animation: fadeInUp 0.18s ease-out;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translate(-50%, 8px);
      }
      to {
        opacity: 1;
        transform: translate(-50%, 0);
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- Hero / Info -->
    <section class="hero-card">
      <div class="hero-inner">
        <div class="logo-pill">
          <span class="icon">ğŸ§½</span>
          <span>Sponge &amp; Soap â€¢ Wash without queues</span>
        </div>
        <h1>Ø­Ø¬Ø² ØºØ³ÙŠÙ„ Ø³ÙŠØ§Ø±ØªÙƒ ÙÙŠ Ø«ÙˆØ§Ù†ÙŠ</h1>
        <p class="hero-sub">
          Ø§Ø®ØªØ± Ø§Ù„ÙØ±Ø¹ ÙˆØ§Ù„Ø®Ø¯Ù…Ø© ÙˆØ§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„ÙƒØŒ ÙˆØ§Ø±ÙØ¹ Ù…Ø³ØªÙˆÙ‰ ØªØ¬Ø±Ø¨Ø© ØºØ³ÙŠÙ„ Ø³ÙŠØ§Ø±ØªÙƒ Ù…Ø¹ Ø®Ù„Ø·Ø© ØªÙ†Ø¸ÙŠÙ Ø®Ø§ØµØ©
          ÙˆÙÙˆØ· Ù†Ø¸ÙŠÙØ© Ø¯Ø§Ø¦Ù…Ù‹Ø§ â€“ Ø¨Ø¯ÙˆÙ† Ø·ÙˆØ§Ø¨ÙŠØ± ÙˆØ¨Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø±.
        </p>
        <div class="hero-badges">
          <span class="hero-badge">âœ… Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø¢Ù…Ù†</span>
          <span class="hero-badge">ğŸ“ ÙØ±ÙˆØ¹ ÙÙŠ Ø§Ù„Ø¸Ù‡Ø±Ø§Ù† ÙˆØ§Ù„Ø®Ø¨Ø±</span>
          <span class="hero-badge">â­ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø¹Ù…Ù„Ø§Ø¡ Ù…ØªÙ…ÙŠØ²Ø©</span>
        </div>
        <div class="hero-highlight">
          <span>ğŸ</span>
          <span>Ø¬Ø±Ù‘Ø¨ ÙƒÙˆØ¨ÙˆÙ† <strong>WELCOME50</strong> Ø£Ùˆ <strong>WASH29</strong> Ù‚Ø¨Ù„ Ø§Ù„Ø¯ÙØ¹.</span>
        </div>
        <div class="hero-grid">
          <div class="hero-stat">
            <strong>+10K</strong>
            Ø­Ø¬ÙˆØ²Ø§Øª ØºØ³ÙŠÙ„ Ù…ÙƒØªÙ…Ù„Ø©
          </div>
          <div class="hero-stat">
            <strong>4.9/5</strong>
            Ù…ØªÙˆØ³Ø· Ø±Ø¶Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
          </div>
          <div class="hero-stat">
            <strong>24/7</strong>
            Ø­Ø¬Ø² Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø³Ø±ÙŠØ¹
          </div>
        </div>
      </div>
    </section>

    <!-- Booking Form -->
    <section class="booking-card">
      <header class="booking-header">
        <div>
          <div class="booking-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</div>
          <div class="booking-sub">Ø§Ù…Ù„Ø£ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø± ÙˆØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†.</div>
        </div>
        <span class="step-tag">Ø®Ø·ÙˆØ© ÙˆØ§Ø­Ø¯Ø© â€¢ Ø£Ù‚Ù„ Ù…Ù† Ø¯Ù‚ÙŠÙ‚Ø©</span>
      </header>

      <form id="bookingForm">
        <div class="form-grid">
          <div class="field">
            <label for="customerName">Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ <span class="req">*</span></label>
            <input id="customerName" class="input" type="text" required placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ"/>
          </div>
          <div class="field">
            <label for="customerMobile">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ <span class="req">*</span></label>
            <input id="customerMobile" class="input" type="tel" required inputmode="tel" placeholder="05xxxxxxxx"/>
            <div class="help-text">Ø³ÙŠÙØ³ØªØ®Ø¯Ù… Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² ÙˆØªØ·Ø¨ÙŠÙ‚ Ø­Ø¯ÙˆØ¯ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† Ù„ÙƒÙ„ Ø¹Ù…ÙŠÙ„.</div>
          </div>
        </div>

        <div class="form-grid">
          <div class="field">
            <label for="locationSelect">Ø§Ù„ÙØ±Ø¹ / Ø§Ù„Ù…ÙˆÙ‚Ø¹ <span class="req">*</span></label>
            <select id="locationSelect" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ±Ø¹</option>
              <option value="Dhahran">Ø§Ù„Ø¸Ù‡Ø±Ø§Ù†</option>
              <option value="Aziziyah - Khobar">Ø§Ù„Ø¹Ø²ÙŠØ²ÙŠØ© - Ø§Ù„Ø®Ø¨Ø±</option>
              <option value="Khobar">Ø§Ù„Ø®Ø¨Ø±</option>
            </select>
          </div>
          <div class="field">
            <label for="serviceSelect">Ø§Ù„Ø®Ø¯Ù…Ø© <span class="req">*</span></label>
            <select id="serviceSelect" required>
              <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø®Ø¯Ù…Ø©</option>
              <option value="187">ØºØ³ÙŠÙ„ Ø¹Ø±Ø¶ Ø§Ù„Ø§ÙØªØªØ§Ø­ 29 Ø±ÙŠØ§Ù„</option>
              <option value="189">ØºØ³ÙŠÙ„ Ø¹Ø±Ø¶ Ø§Ù„Ø§ÙØªØªØ§Ø­ 39 Ø±ÙŠØ§Ù„</option>
              <option value="449">ØºØ³ÙŠÙ„ VIP â€“ Ø¹Ø±Ø¶ 29 Ø±ÙŠØ§Ù„</option>
            </select>
            <div class="help-text">ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ¤Ø«Ø± Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© Ø¹Ù„Ù‰ Ø£Ù‡Ù„ÙŠØ© Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†.</div>
          </div>
        </div>

        <div class="form-grid">
          <div class="field">
            <label for="dateInput">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²</label>
            <input id="dateInput" class="input" type="date"/>
          </div>
          <div class="field">
            <label for="timeInput">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ</label>
            <input id="timeInput" class="input" type="time"/>
          </div>
        </div>

        <!-- Coupon Section -->
        <div class="coupon-box">
          <div class="coupon-header">
            <span>ÙƒÙˆØ¨ÙˆÙ† Ø§Ù„Ø®ØµÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</span>
            <span class="small-label">Ù…Ø«Ø§Ù„: <strong>WELCOME50</strong> Ø£Ùˆ <strong>WASH29</strong></span>
          </div>
          <div class="coupon-row">
            <input
              id="couponCode"
              class="input coupon-input"
              type="text"
              placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† Ù‡Ù†Ø§"
              autocomplete="off"
            />
            <button type="button" id="couponApplyBtn" class="btn">
              <span id="couponBtnLabel">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†</span>
            </button>
          </div>
          <div id="couponStatus" class="coupon-status status-muted">
            Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù„Ø¯ÙŠÙƒ ÙƒÙˆØ¨ÙˆÙ† ÙŠÙ…ÙƒÙ†Ùƒ ØªØ±Ùƒ Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ ÙØ§Ø±ØºÙ‹Ø§.
          </div>
        </div>

        <!-- Summary -->
        <div class="summary-box">
          <div class="summary-row muted">
            <span>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (Ø­Ø³Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø©)</span>
            <span class="price"><span id="basePrice">0</span> Ø±.Ø³</span>
          </div>
          <div class="summary-row muted">
            <span>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®ØµÙ… Ø§Ù„Ù…Ø·Ø¨Ù‘Ù‚</span>
            <span class="price">- <span id="discountValue">0</span> Ø±.Ø³</span>
          </div>
          <div class="summary-row total">
            <span>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…</span>
            <span class="price"><span id="finalTotal">0</span> Ø±.Ø³</span>
          </div>
          <div class="pill-note">
            <span>â„¹ï¸</span>
            <span id="couponNoteText">
              Ø³ÙŠØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©.
            </span>
          </div>
        </div>

        <!-- Footer actions -->
        <div class="footer-actions">
          <div class="left">
            <span class="small-label">Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©</span>
            <button type="submit" id="submitBtn" class="btn-secondary">
              Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø­Ø¬Ø² (ØªØ¬Ø±ÙŠØ¨ÙŠ)
            </button>
            <span class="safe-text">Ù„Ù† ÙŠØªÙ… Ø§Ù„Ø³Ø­Ø¨ Ù…Ù† Ø¨Ø·Ø§Ù‚ØªÙƒ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ.</span>
          </div>
          <div>
            <button type="button" class="btn" id="recalculateBtn">
              ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¹Ø±
            </button>
          </div>
        </div>
      </form>
    </section>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast">
    <span id="toastIcon">â„¹ï¸</span>
    <span id="toastText">Ø±Ø³Ø§Ù„Ø© Ù‚ØµÙŠØ±Ø© Ù‡Ù†Ø§</span>
  </div>

  <script>
    (function () {
      "use strict";

      // =========================
      // CONFIG
      // =========================
      const COUPON_API = "https://demotesting.nahl.app/api/coupon-proxy";

      // ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ù…Ø¹ Ø§Ù„Ø³Ø¹Ø± â€“ Ø¹Ø¯Ù‘Ù„Ù‡Ø§ Ø­Ø³Ø¨ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
      const SERVICES = {
        "187": { name: "ØºØ³ÙŠÙ„ Ø¹Ø±Ø¶ Ø§Ù„Ø§ÙØªØªØ§Ø­ 29 Ø±ÙŠØ§Ù„", price: 69 },
        "189": { name: "ØºØ³ÙŠÙ„ Ø¹Ø±Ø¶ Ø§Ù„Ø§ÙØªØªØ§Ø­ 39 Ø±ÙŠØ§Ù„", price: 79 },
        "449": { name: "ØºØ³ÙŠÙ„ VIP â€“ Ø¹Ø±Ø¶ 29 Ø±ÙŠØ§Ù„", price: 99 }
      };

      const state = {
        baseSubtotal: 0,
        discount: 0,
        couponCode: "",
        couponResponse: null
      };

      // =========================
      // DOM refs
      // =========================
      const serviceSelect   = document.getElementById("serviceSelect");
      const locationSelect  = document.getElementById("locationSelect");
      const nameInput       = document.getElementById("customerName");
      const mobileInput     = document.getElementById("customerMobile");
      const couponInput     = document.getElementById("couponCode");
      const couponBtn       = document.getElementById("couponApplyBtn");
      const couponBtnLabel  = document.getElementById("couponBtnLabel");
      const couponStatus    = document.getElementById("couponStatus");
      const basePriceEl     = document.getElementById("basePrice");
      const discountEl      = document.getElementById("discountValue");
      const finalTotalEl    = document.getElementById("finalTotal");
      const couponNoteText  = document.getElementById("couponNoteText");
      const recalcBtn       = document.getElementById("recalculateBtn");
      const bookingForm     = document.getElementById("bookingForm");
      const toastEl         = document.getElementById("toast");
      const toastIcon       = document.getElementById("toastIcon");
      const toastText       = document.getElementById("toastText");

      // =========================
      // Helpers
      // =========================
      function formatPrice(v) {
        const n = Number(v) || 0;
        return n.toLocaleString("ar-SA", {
          maximumFractionDigits: 0,
          minimumFractionDigits: 0
        });
      }

      function showToast(msg, type) {
        toastText.textContent = msg || "";
        if (type === "error") {
          toastIcon.textContent = "âš ï¸";
        } else if (type === "success") {
          toastIcon.textContent = "âœ…";
        } else {
          toastIcon.textContent = "â„¹ï¸";
        }
        toastEl.classList.add("show");
        setTimeout(() => {
          toastEl.classList.remove("show");
        }, 2600);
      }

      function updateBaseSubtotal() {
        const svcId = serviceSelect.value;
        const svc = SERVICES[svcId];
        state.baseSubtotal = svc ? Number(svc.price) || 0 : 0;
      }

      function updateSummaryDisplay() {
        const base = state.baseSubtotal || 0;
        const disc = Math.min(state.discount || 0, base);
        const final = Math.max(0, base - disc);

        basePriceEl.textContent  = formatPrice(base);
        discountEl.textContent   = formatPrice(disc);
        finalTotalEl.textContent = formatPrice(final);
      }

      function resetCouponState(keepCode) {
        if (!keepCode) {
          couponInput.value = "";
          state.couponCode = "";
        }
        state.discount = 0;
        state.couponResponse = null;
        couponStatus.textContent = "Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù„Ø¯ÙŠÙƒ ÙƒÙˆØ¨ÙˆÙ† ÙŠÙ…ÙƒÙ†Ùƒ ØªØ±Ùƒ Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ ÙØ§Ø±ØºÙ‹Ø§.";
        couponStatus.className = "coupon-status status-muted";
        couponNoteText.textContent = "Ø³ÙŠØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©.";
      }

      function setCouponLoading(isLoading) {
        couponBtn.disabled = isLoading;
        couponInput.disabled = isLoading;
        couponBtnLabel.textContent = isLoading ? "Ø¬Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚..." : "ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†";
      }

      function getCleanMobile() {
        return (mobileInput.value || "").replace(/\D/g, "");
      }

      // =========================
      // Coupon logic
      // =========================
      async function applyCoupon() {
        const code = (couponInput.value || "").trim();
        if (!code) {
          resetCouponState(true);
          updateSummaryDisplay();
          showToast("Ø§Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† Ø£ÙˆÙ„Ø§Ù‹.", "error");
          return;
        }

        if (!serviceSelect.value) {
          showToast("Ø§Ø®ØªØ± Ø§Ù„Ø®Ø¯Ù…Ø© Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†.", "error");
          couponStatus.textContent = "Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªØ± Ø§Ù„Ø®Ø¯Ù…Ø© Ø£ÙˆÙ„Ø§Ù‹ØŒ Ù„Ø£Ù† Ø¨Ø¹Ø¶ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø®Ø¯Ù…Ø§Øª Ù…Ø­Ø¯Ø¯Ø©.";
          couponStatus.className = "coupon-status status-error";
          return;
        }

        if (!locationSelect.value) {
          showToast("Ø§Ø®ØªØ± Ø§Ù„ÙØ±Ø¹ Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†.", "error");
          couponStatus.textContent = "Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªØ± Ø§Ù„ÙØ±Ø¹ØŒ Ù„Ø£Ù† Ø¨Ø¹Ø¶ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª Ù…Ø®ØµØµØ© Ù„Ù…Ù†Ø§Ø·Ù‚ Ù…Ø¹ÙŠÙ‘Ù†Ø©.";
          couponStatus.className = "coupon-status status-error";
          return;
        }

        if (!mobileInput.value) {
          showToast("Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ Ù„ØªØ·Ø¨ÙŠÙ‚ Ø­Ø¯ÙˆØ¯ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† Ù„ÙƒÙ„ Ø¹Ù…ÙŠÙ„.", "error");
          couponStatus.textContent = "Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ ÙŠØ³Ø§Ø¹Ø¯Ù†Ø§ Ø¹Ù„Ù‰ ØªØ·Ø¨ÙŠÙ‚ Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ø§Ø¯Ù„Ø© Ù„ÙƒÙ„ Ø¹Ù…ÙŠÙ„.";
          couponStatus.className = "coupon-status status-error";
          return;
        }

        // ØªØ£ÙƒØ¯ Ø£Ù† subtotal Ø±Ù‚Ù… Ø­Ù‚ÙŠÙ‚ÙŠ (Ø¨Ø¯ÙˆÙ† Ø±Ù…ÙˆØ² Ø¹Ù…Ù„Ø©)
        updateBaseSubtotal();
        const subtotal = state.baseSubtotal || 0;
        if (subtotal <= 0) {
          showToast("ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø®ØªÙŠØ§Ø± Ø®Ø¯Ù…Ø© ØµØ­ÙŠØ­Ø© Ù„ÙŠØªÙ… Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø±.", "error");
          couponStatus.textContent = "Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† Ù‚Ø¨Ù„ ØªØ­Ø¯ÙŠØ¯ Ø®Ø¯Ù…Ø© Ø¨Ø³Ø¹Ø± ØµØ­ÙŠØ­.";
          couponStatus.className = "coupon-status status-error";
          return;
        }

        setCouponLoading(true);
        couponStatus.textContent = "Ø¬Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†...";
        couponStatus.className = "coupon-status status-muted";

        const payload = {
          action: "validateCoupon",
          code: code,
          subtotal: subtotal,
          serviceId: serviceSelect.value,
          locationName: locationSelect.value,
          customerM: getCleanMobile()
        };

        const url = COUPON_API + "?action=validateCoupon";

        try {
          const res = await fetch(url, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
          });

          let data;
          try {
            data = await res.json();
          } catch (e) {
            data = { ok: false, error: "invalid_json", raw: await res.text() };
          }

          if (!res.ok || !data || data.ok === false) {
            const msgAR = data && (data.msgAR || data.error);
            couponStatus.textContent = msgAR || "Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
            couponStatus.className = "coupon-status status-error";
            state.discount = 0;
            state.couponResponse = data || null;
            updateSummaryDisplay();
            showToast(msgAR || "ÙØ´Ù„ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†.", "error");
            return;
          }

          // Ù†Ø¬Ø§Ø­
          state.couponCode = data.code || code.toUpperCase();
          state.discount = Number(data.discount || 0);
          state.couponResponse = data;

          updateSummaryDisplay();

          const final = Math.max(0, (state.baseSubtotal || 0) - (state.discount || 0));
          couponStatus.textContent = data.msgAR || "ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† Ø¨Ù†Ø¬Ø§Ø­.";
          couponStatus.className = "coupon-status status-ok";
          couponNoteText.textContent = "ØªÙ… ØªØ·Ø¨ÙŠÙ‚ ÙƒÙˆØ¨ÙˆÙ† " + state.couponCode +
            "ØŒ Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…: " + formatPrice(final) + " Ø±.Ø³.";

          showToast("ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† Ø¨Ù†Ø¬Ø§Ø­ âœ…", "success");
        } catch (err) {
          console.error("coupon error", err);
          couponStatus.textContent = "Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†.";
          couponStatus.className = "coupon-status status-error";
          showToast("Ù…Ø´ÙƒÙ„Ø© Ù…Ø¤Ù‚ØªØ© ÙÙŠ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§ØªØŒ Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ù‹Ø§.", "error");
        } finally {
          setCouponLoading(false);
        }
      }

      // =========================
      // Events
      // =========================
      serviceSelect.addEventListener("change", function () {
        updateBaseSubtotal();
        // Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø®Ø¯Ù…Ø©ØŒ Ù†Ù„ØºÙŠ Ø§Ù„Ø®ØµÙ… Ø§Ù„Ø³Ø§Ø¨Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ù„ØªØ¬Ù†Ù‘Ø¨ ØªØ¹Ø§Ø±Ø¶ Ø§Ù„Ø´Ø±ÙˆØ·
        resetCouponState(true);
        updateSummaryDisplay();
      });

      locationSelect.addEventListener("change", function () {
        // ÙÙ‚Ø· ØªØ­Ø¯ÙŠØ« Ù…Ù„Ø§Ø­Ø¸Ø© Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŒ Ù„Ø§ Ù†Ù„Ù…Ø³ Ø§Ù„Ø®ØµÙ…
        couponStatus.className = "coupon-status status-muted";
      });

      recalcBtn.addEventListener("click", function () {
        updateBaseSubtotal();
        updateSummaryDisplay();
        showToast("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¹Ø± Ø­Ø³Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©.", "info");
      });

      couponBtn.addEventListener("click", function (e) {
        e.preventDefault();
        applyCoupon();
      });

      bookingForm.addEventListener("submit", function (e) {
        e.preventDefault();
        // Ù‡Ù†Ø§ Ù…ÙƒØ§Ù† Ø±Ø¨Ø· Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯ÙØ¹ (Telr) Ø£Ùˆ API Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
        updateBaseSubtotal();
        updateSummaryDisplay();
        const finalAmount = Math.max(0, (state.baseSubtotal || 0) - (state.discount || 0));
        showToast("ØªÙ… ØªØ¬Ù‡ÙŠØ² Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬Ø² (ØªØ¬Ø±ÙŠØ¨ÙŠ). Ø§Ù„Ù…Ø¨Ù„Øº: " + formatPrice(finalAmount) + " Ø±.Ø³.", "success");

        // Ù…Ø«Ø§Ù„ ÙÙ‚Ø· (Ù„Ø§ redirect ÙØ¹Ù„ÙŠ):
        console.log("Booking payload", {
          name: nameInput.value,
          mobile: getCleanMobile(),
          location: locationSelect.value,
          serviceId: serviceSelect.value,
          subtotal: state.baseSubtotal,
          discount: state.discount,
          finalAmount: finalAmount,
          coupon: state.couponCode || null,
          couponRawResponse: state.couponResponse
        });
      });

      // =========================
      // Init
      // =========================
      updateBaseSubtotal();
      updateSummaryDisplay();
    })();
  </script>
</body>
</html>
