<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Primary Meta Tags -->
    <title>حجوزات المواعيد</title>
    <meta name="title" content="حجوزات المواعيد">
<meta name="description" content="1.	بنغسل سيارتك بخلطة خاصة مدعّمة بالواكس تحميها من الغبار والخدوش.  2.	فوطنا دايمًا نظيفة. 3.	ونستخدم إسفنجة مخصوصة للكفرات عشان نهتم بكل تفاصيل سيارتك.
#غسيل_بدون_طوابير">

<!-- Google / Search Engine Tags -->
<meta itemprop="name" content="حجوزات المواعيد">
<meta itemprop="description" content="1.	بنغسل سيارتك بخلطة خاصة مدعّمة بالواكس تحميها من الغبار والخدوش.  2.	فوطنا دايمًا نظيفة. 3.	ونستخدم إسفنجة مخصوصة للكفرات عشان نهتم بكل تفاصيل سيارتك.
#غسيل_بدون_طوابير">
<meta itemprop="image" content="https://pdnmghkpepvsfaiqlafk.supabase.co/storage/v1/object/public/nahl%20assets/Sponge%20&%20Soap/Logo%20-%20Sponge%20and%20Soap%20-%201.png">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://www.spongnsoap.com">
<meta property="og:title" content="حجوزات المواعيد">
<meta property="og:description" content="1.	بنغسل سيارتك بخلطة خاصة مدعّمة بالواكس تحميها من الغبار والخدوش.  2.	فوطنا دايمًا نظيفة. 3.	ونستخدم إسفنجة مخصوصة للكفرات عشان نهتم بكل تفاصيل سيارتك.
#غسيل_بدون_طوابير">
<meta property="og:image" content="https://pdnmghkpepvsfaiqlafk.supabase.co/storage/v1/object/public/nahl%20assets/Sponge%20&%20Soap/Logo%20-%20Sponge%20and%20Soap%20-%201.png">
<meta property="og:image:src" content="https://pdnmghkpepvsfaiqlafk.supabase.co/storage/v1/object/public/nahl%20assets/Sponge%20&%20Soap/Logo%20-%20Sponge%20and%20Soap%20-%201.png">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://www.spongnsoap.com">
<meta property="twitter:title" content="حجوزات المواعيد">
<meta property="twitter:description" content="1.	بنغسل سيارتك بخلطة خاصة مدعّمة بالواكس تحميها من الغبار والخدوش.  2.	فوطنا دايمًا نظيفة. 3.	ونستخدم إسفنجة مخصوصة للكفرات عشان نهتم بكل تفاصيل سيارتك.
#غسيل_بدون_طوابير">
<meta property="twitter:image" content="https://pdnmghkpepvsfaiqlafk.supabase.co/storage/v1/object/public/nahl%20assets/Sponge%20&%20Soap/Logo%20-%20Sponge%20and%20Soap%20-%201.png">
<meta property="twitter:image:src" content="https://pdnmghkpepvsfaiqlafk.supabase.co/storage/v1/object/public/nahl%20assets/Sponge%20&%20Soap/Logo%20-%20Sponge%20and%20Soap%20-%201.png">
<link rel="shortcut icon" href="https://pdnmghkpepvsfaiqlafk.supabase.co/storage/v1/object/public/nahl%20assets/Sponge%20&%20Soap/Logo%20-%20Sponge%20and%20Soap%20-%201.png" type="image/x-icon">
<link rel="icon" type="image/png" sizes="32x32" href="">
<link rel="icon" type="image/png" sizes="16x16" href="">

<meta name="keywords" content="المدينة,المنورة,الشرقية,القطيف,الخبر,الدمام,سيهات,car,سيارة,mobile,موبيل,موبايل,لكزس,lexus,واش,wash,car wash,غسيل,غسيل_بدون_طوابير,طابور,بدون,طوابير,موسم,داخلي,خارجي,نظيف,تلميع,تظليل,clean,internal,حجز,موعد,reserve,appointment,ticket,work,عمل,riyad,dahran,dhahran,تنظيف,نظافة,بخار,ماء,ماي,مويه,صابون,نحل,nahl,nahl.app,أزرق,نيلي,Blue,Last clean,اسفجنة وصابون,sponge, soap, spongnsoap,spongensoap,اخر نظافة,مايكلين">
<meta name="robots" content="index, follow">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="language" content="Arabic">
    <title>حجز موعد</title>

    <script src="https://code.jquery.com/jquery-3.6.3.slim.min.js" integrity="sha256-ZwqZIVdD3iXNyGHbSYdsmWP//UBokj2FHAxKuSBKDSo=" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

  <!-- date-fns -->
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
  <!-- luxon -->
  <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>

  
    <!-- Font Awesome -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
  rel="stylesheet"
/>
<!-- Google Fonts -->
<link
  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
  rel="stylesheet"
/>
<link href="https://fonts.googleapis.com/css2?family=Tinos:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
<!-- country codes -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@24.4.0/build/css/intlTelInput.css">
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@24.4.0/build/js/intlTelInputWithUtils.js"></script>



</head>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
  body,
  html {
    margin: 0%;
    height: 100%;
    font-family: 'Cairo', sans-serif;
        position: fixed;
    width: 100vw;
    height: 100vh;
        
  }
  input, select{
     text-align: center;
  }
  body{
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      background-size: cover;
  }
  .bg-image {
      position: absolute;
      width: 100%;
      z-index: -1;
      background-image: url("https://www.dropbox.com/s/s9bxuykl0w49dqa/background2.jpg?raw=1");
      filter: blur(8px);
      -webkit-filter: blur(8px);
      height: 100%;
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
  }
  h1{
      margin-bottom:5.3%;
  }
  #banner, #form{
      flex-basis: 50%;
      height: 100%;
  }

  #form{
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: #48b5d0e0;
      color: #ffffff;
      box-shadow: 0 0 5px 10px rgba(5, 28, 59, 0.981), 10px 0px 70px 0px rgba(5, 28, 59, 0.426);;    
  }
  #form-content{
      width: 100%;
      overflow: auto;
      flex-basis: 100%;
      display: flex;
    flex-direction: column;
    justify-content: space-between;
  }
  #form-content #page1, #form-content #page2, #form-content #page3, #form-content #page4, #form-content #page5, #form-content #page6, #form-content #page7{
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      z-index: 2;
      position: relative;
      justify-content: space-evenly;
      height: auto;
  }
  #page1, #page2,#page3,#page4,#page5,#page6, #page7{
    justify-content: space-evenly;
    height: 100%;
  }
  #page1, #page2,#page4,#page5,#page6, #page7{
    height: 70%;
  }
  .header {
    z-index: 2;
  text-align: center;
  color: #ffffff;
  font-weight: bold;
  flex-basis: 10%;
  margin: 0;
    padding: 0;
    padding-top: 10%;
  }
  .header h1 {
    vertical-align: -webkit-baseline-middle;
    display: inline-block;
    margin: 0;
    padding: 0;
    font-size: 40px;
  }
  .header img {
   width:220px;
  }
  .header-grid1 {
    display: flex;
    flex-direction: row;
    align-items: flex-end;
    justify-content: center;
  }
  .header-grid3 {
    display: flex;
    flex-direction: row;
    align-items: flex-end;
    justify-content: flex-end;
  }
  .header-grid2 {
    display: flex;
    flex-direction: row;
    align-items: flex-end;
    justify-content: center;
    font-size: 10px;
  }
  .social {
    width: 100% !important;
  }
  a.nostyle:link {
    text-decoration: inherit;
    color: inherit;
    cursor: auto;
}

a.nostyle:visited {
    text-decoration: inherit;
    color: inherit;
    cursor: auto;
}
/* CSS */
.radio-buttons{
  align-items: center;
  background-color: #fff;
  border-radius: 12px;
  box-shadow: transparent 0 0 0 3px, rgba(18, 18, 18, .1) 0 6px 20px;
  box-sizing: border-box;
  color: #40bfb7;
  cursor: pointer;
  display: inline-flex;
  justify-content: center;
  outline: none;
  padding: 1rem 1.2rem;
  text-align: center;
  text-decoration: none;
  transition: box-shadow .2s, -webkit-box-shadow .2s;
  border: 0;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  width: 50%;
}
.radios:checked + img{
  background: linear-gradient(45deg, rgba(137,137,137,1) 0%, rgba(84,108,156,1) 100%);
    color: #493a68;
}
.radios:checked + h2{
  background: linear-gradient(45deg, rgba(137,137,137,1) 0%, rgba(84,108,156,1) 100%);
    color: #493a68;
}
.radios:checked + svg{
  background: linear-gradient(45deg, rgba(137,137,137,1) 0%, rgba(84,108,156,1) 100%);
  color: #493a68;
  /* color: white; */
}
.radios:checked + svg g{
}
.radio-label{
  width: 80%;
}
.filter-button {
  align-items: center;
  background-color: #ffffff;
  border-radius: 12px;
  box-shadow: transparent 0 0 0 3px, rgba(18, 18, 18, .1) 0 6px 20px;
  box-sizing: border-box;
  color:#0394b6;
  cursor: pointer;
  display: inline-flex;
  /* flex: 1 1 auto; */
  font-family: 'Cairo', sans-serif;
  font-size: 1.2rem;
  font-weight: 700;
  justify-content: center;
  line-height: 1;
  margin: 0;
  outline: none;
  padding: 1rem 1.2rem;
  text-align: center;
  text-decoration: none;
  transition: box-shadow .2s, -webkit-box-shadow .2s;
  white-space: nowrap;
  border: 0;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
}
.filter-button-wrap{
  max-width: 250px;
  padding: 1rem;
  position: relative;
  background: linear-gradient(to right, #d3d3d3, #0394b6);
  padding: 3px;
  border-radius: 15px;
}

.filter-button:hover {
    background-color: #0394b6;
    color: #f5f5f5;
}
.time-date-box {
  display: flex;
  flex-direction: column;
  border-radius: 10px;
  width: 100%;
  margin-top: 30px;
  padding: 10px;
}
#time-date-header {
  border-radius: 12px; /* or any value like 8px, 16px */
  overflow: hidden; /* ensures content stays rounded */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* optional: match button style */
  border: none; /* optional: cleaner look */
}
.time-date-header { 
    display: flex;
    flex-direction: row;
    justify-content: stretch;
    align-items: center;
    color: black;
}
.time-date-header div{
  padding-top: 15px;
  padding-bottom: 15px;
  background-color: white; 
  flex-basis: 33.333%;  
  box-shadow: transparent 0 0 0 3px, rgba(18, 18, 18, .1) 0 6px 20px;  
  transition: all 1s;
  cursor: pointer;
  
  }
  .time-date-header div:hover{
    background-color: #0394b6;
    color: #f5f5f5;
  }
  .time-date-header .choosed{
    background-color: #0394b6;
    color: #f5f5f5;
  }
  .spinner-border{
    border-color:#0394b6;
    border-right-color: transparent;
  }
#department-spinner{
  color: #0394b6;

}
.time-container {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1rem;
  justify-content: space-evenly;
  align-content: start;       /* ← push all rows to the top */
  align-items: start;         /* ← align each button to the top of its cell */
  background-color: white;
  height: 23rem;
  overflow-y: auto;
}




.time-button {
  align-items: center;
  background-color: #fff;
  border-radius: 12px;
  box-shadow: transparent 0 0 0 3px, rgba(18, 18, 18, .1) 0 6px 20px;
  box-sizing: border-box;
  color: #121212;
  cursor: pointer;
  display: inline-flex;
  flex: 1 1 auto;
  font-family: Inter, sans-serif;
  font-size: 1rem;
  font-weight: 700;
  justify-content: center;
  line-height: 1;
  margin: 3%;
  outline: none;
  padding: 1.5rem 1.2rem;
  text-align: center;
  text-decoration: none;
  transition: box-shadow .2s, -webkit-box-shadow .2s;
  white-space: nowrap;
  border: 0;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  align-self: start;
  flex-grow: 0;
}



a {
    color: #ffffff;
    text-decoration: none;
}
.time-button:hover {

    background-color: #0394b6;
    color: #f5f5f5;
}
#date {
  padding: 2rem;
 
}
form input {
  margin: 3%;

}
.banner-content {
  display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100%;

}
.banner-content-holder {display: flex;
          flex-direction: column;
          align-items: center;
          height: 50%;
          justify-content: center;
       
      }
@-webkit-keyframes fadeOut {
          0% {opacity: 1;}
          100% {opacity: 0;}
       }
       
       @keyframes fadeOut {
          0% {opacity: 1;}
          100% {opacity: 0;}
       }
       
       .fadeOut {
     
          animation: fadeOut 1s forwards ;

       }
       @keyframes fadeIn {
          0% {opacity: 0;}
          100% {opacity: 1;}
       }
       
       .fadeIn {

          animation: fadeIn 1s forwards ;
       }
       #select2-container {
width: 100% !important;
}



.instagram-button{
  position: fixed;
  bottom: 56px;
  left: 15px;
  z-index: 99;
  background-color: #00000000;
  border-radius: 50px;
  color: #ffffff;
  text-decoration: none;
  width: 50px;
  height: 50px;
  font-size: 30px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  animation: effect 5s ease-in;
}
.instagram-button:hover {
width: 55px;
height: 55px;
font-size: 35px;
}
.tiktok-button{
  position: fixed;
  bottom: 100px;
  left: 15px;
  z-index: 99;
  background-color: #00000000;
  border-radius: 50px;
  color: #ffffff;
  text-decoration: none;
  width: 50px;
  height: 50px;
  font-size: 30px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  animation: effect 5s ease-in;
}
.tiktok-button:hover {
width: 55px;
height: 55px;
font-size: 35px;
}
.whatsapp-button{
  position: fixed;
  bottom: 15px;
  left: 15px;
  z-index: 99;
  background-color: #00000000;
  border-radius: 50px;
  color: #ffffff;
  text-decoration: none;
  width: 50px;
  height: 50px;
  font-size: 30px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  animation: effect 5s ease-in;
}
.whatsapp-button:hover {
width: 55px;
height: 55px;
font-size: 35px;
}
.page5-contact {
  margin: 2% 20% 0 20%;
  font-size: smaller;
  display: none;
}

@keyframes effect {
  20%, 100% {
      width: 50px;
      height: 50px;
      font-size: 30px;
  }
  0%, 10%{
      width: 55px;
      height: 55px;
      font-size: 35px;
  }
  5%{
      width: 50px;
      height: 50px;
      font-size: 30px;
  }
}
svg { 
  left: -0%;
    width: 47%;

}
@media only screen and (max-width: 1000px) {
  #banner {
      position: absolute;
      display: none;
      flex-basis: 0%;
      filter: blur(7px);
  }
  .banner-content {
    z-index: -1;
  }
  #form {
      flex-basis: 100%;
  }
  .banner-content-holder {
      width: 100%;
      height: 100%;
  }
  svg{
    left: -3%;
    width: 100%;
  }
  svg g path {
      fill: #d6d6d6;
  }
  #time-container{
     display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  flex-direction: row;
  flex-wrap: wrap;
  }
  .radio-buttons{
    width: 60%;
  }
}

@media only screen and (max-width: 450px) {
  #date { 
    padding-top: 0.5rem;
  padding-bottom: 2rem;
  }
  .radio-buttons{
    width: 80%;
  }
}

@media only screen and (max-height: 775px) {
  
  #page3 {
    padding-top: 10%;
    margin-bottom: 10%;
  }
  
  #page5, #page4{
    padding-top: 10%;
    margin-bottom: 10%;
  }
  #page1,#page2 {
    margin-bottom: 10%;
    height: 60%;
  }
  #page6, #page7{
    height: 50%;
  }
  .radio-buttons{
    width: 80%;
  }

}

    background-color: white;
} */
#service, #serviceCat {
  margin: 3%;
}
input:focus{
    outline: none;
}
.select2-selection__rendered {
line-height: 32px !important;
}

.select2-selection {
height: 37px !important;
}
#page6-resend{
  position: relative;
  background: linear-gradient(45deg, rgba(73,58,104,1) 0%, rgba(64,191,184,1) 100%);              
  transition: all 1s ;
}
#page6-resend:hover{
  transition: all 1s ;
  color: rgb(43 37 57);
}
#page6-resend span {
  z-index: 3;
}
#page6-resend:after {
  position: absolute;
  content: '';
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 12px;
  background-image:  linear-gradient(45deg,rgba(64,191,184,1) 0%, rgba(73,58,104,1) 100%);       
  transition: opacity 0.5s ease-out;
  z-index: 2;
  opacity: 0;
}
#page6-resend:hover:after {
  opacity: 1;
}
.iti { width: 100%; }
#chip-container {
  display: flex;
  justify-content: center;
  gap: 15px;
  flex-wrap: wrap;
  margin-top: 20px;
}



body {
  font-family: 'Cairo', sans-serif;
  background-color: #f5f5f5;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
}

/* Form Container */
.form-container {
  display: flex;
  flex-direction: column;
  gap: 5px;
  width: 100%;
  max-width: 400px;
}

/* Chip Style for Fields */
.chip {
  background: rgba(255, 255, 255, 0);
  color: #ffffff;
  padding: 8px;
  border-radius: 8px;
  box-shadow: 0 0 6px rgba(55, 51, 141, 0);
  display: flex;
  flex-direction: column;
  align-items: center;
  transition: transform 0.2s ease-in-out;
}

.chip:hover {
  transform: scale(1.01);
}

/* Label Style */
.chip label {
  font-size: 12px; 
  font-weight: 600;
  margin-bottom: 3px; 
  text-align: center;
}



.chip select,
.chip input {
  width: 100%;
  max-width: 280px; /* Slightly reduced field width */
  font-size: 12px; /* Smaller font size */
  padding: 4px; /* Reduced padding */
  border-radius: 6px;
  border: none;
  text-align: center;
  background: #ffffff;
  color: #37338d;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); /* Lighter shadow */
  transition: box-shadow 0.3s ease-in-out;
}

/* Focus Effect for Fields */
.chip select:focus,
.chip input:focus {
  box-shadow: 0 0 4px rgba(244, 206, 20, 0.7);
  outline: none;
}

/* Readonly Field Styling */
#locationDescription {
  font-weight: bold;
  background: rgba(233, 236, 239, 1);
  color: #555;
  font-size: 12px; /* Smaller font size */
  padding: 4px; /* Reduced padding */
}

#drag-instructions {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255, 255, 255, 0.9);
  padding: 8px 12px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  text-align: center;
  font-size: 14px;
  color: #333;
  z-index: 9999;
  animation: fadeIn 0.5s ease-in-out;
}

#drag-instructions img {
  width: 40px;
  height: auto;
  margin-bottom: 4px;
  animation: moveHand 1.5s infinite alternate ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes moveHand {
  from { transform: translateX(0px); }
  to { transform: translateX(15px); }
}

#drag-icon {
  font-size: 40px;
  display: block;
  margin: 0 auto 4px;
  animation: moveHand 1.5s infinite alternate ease-in-out;
}

@keyframes moveHand {
  from { transform: translateX(0); }
  to   { transform: translateX(15px); }
}
.rebook-button {
  background: linear-gradient(135deg, #0394b6, #48b5d0);
  color: #ffffff;
  font-size: 1.2rem;
  padding: 0.8em 2em;
  border-radius: 12px;
  border: none;
  box-shadow: 0 4px 12px rgba(3, 148, 182, 0.3);
  transition: all 0.3s ease-in-out;
  font-family: 'Cairo', sans-serif;
  font-weight: bold;
  letter-spacing: 0.5px;
}

.rebook-button:hover {
  background: linear-gradient(135deg, #027790, #32a5bc);
  transform: scale(1.05);
  box-shadow: 0 6px 18px rgba(3, 148, 182, 0.5);
  cursor: pointer;
}

:root{
  --fab-size: 56px;
  --fab-bg: rgba(34,34,34,.55); /* خلفية زجاجية داكنة */
}

/* زر دائري عائم موحّد */
.social-fab{
  position: fixed;
  left: 15px;
  z-index: 999;
  width: var(--fab-size);
  height: var(--fab-size);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;

  color: #fff;
  text-decoration: none;
  background: var(--fab-bg);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);

  box-shadow:
    0 8px 20px rgba(0,0,0,.35),
    0 0 0 2px rgba(255,255,255,.10) inset; /* حافة داخلية خفيفة */

  transition: transform .18s ease, box-shadow .18s ease, opacity .18s ease;
  will-change: transform, box-shadow;
}

.social-fab i{
  font-size: 1.4rem;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,.4)); /* ظل على الأيقونة نفسها */
}

/* مواضع الأزرار عموديًا */
.whatsapp-button{ bottom: 15px;  --brand:#25D366; }
.instagram-button{ bottom: 74px;  --brand:#E1306C; }
.tiktok-button{    bottom: 133px; --brand:#69C9D0; }

/* تأثير التحويم/الفوكس: ظل أقوى + وهج بلون العلامة */
.social-fab:hover,
.social-fab:focus-visible{
  transform: translateY(-2px);
  box-shadow:
    0 12px 26px rgba(0,0,0,.45),
    0 0 0 2px var(--brand) inset,
    0 0 14px var(--brand);
  outline: none; /* سنظهر بديل الوصولية أدناه */
}

/* حلّ الوصولية: حلقة تركيز واضحة عند استخدام الكيبورد */
.social-fab:focus-visible{
  outline: 3px solid var(--brand);
  outline-offset: 3px;
}

/* تقليل الحركة لمن يفضّل ذلك */
@media (prefers-reduced-motion: reduce){
  .social-fab{ transition: none; }
}
</style>
<body>
    <div class="bg-image">
    </div>
    <div id="banner" >
        <div class="banner-content">
            <div class="banner-content-holder" >
            <img
            style="margin-left: 20px; margin-right: 20px; width: 111%;"
            src="https://pdnmghkpepvsfaiqlafk.supabase.co/storage/v1/object/public/nahl%20assets/Sponge%20&%20Soap/Logo%20-%20Sponge%20and%20Soap%20-%201.png"
            />
            <!-- <h2> تطبيقات نحل</h2> -->
            <svg id="visual" viewBox="0 0 900 600" width="500" height="600" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" style="position: absolute; z-index: -1;">
                <g transform="translate(460.6560045766935 330.46230543970523)">
                    <path id="blob1"
                    d="M179.7 -253.3C226.1 -213.6 252.4 -152 270.9 -89.4C289.4 -26.7 300.2 37.2 279.3 87.5C258.5 137.8 205.9 174.5 154.1 198.3C102.3 222.1 51.1 233.1 -3.7 238.2C-58.6 243.3 -117.2 242.6 -161.4 216.3C-205.6 190 -235.5 138.1 -265.6 78.5C-295.8 18.9 -326.2 -48.5 -304.9 -94.5C-283.7 -140.5 -210.7 -165 -151.3 -200.6C-91.8 -236.1 -45.9 -282.5 10.3 -296.8C66.6 -311 133.2 -293 179.7 -253.3" fill="#ffffffd4">
                    </path>
                </g>
                <g transform="translate(412.8686509605503 289.1871898626427)" style="visibility: hidden;">
                    <path id="blob2"
                    d="M137.5 -199C174.6 -162.2 198.8 -117.3 233.1 -63.5C267.5 -9.7 312.1 53.1 300 99.7C287.9 146.3 219.2 176.7 159.8 209.6C100.3 242.4 50.2 277.7 -5.5 285.3C-61.1 292.8 -122.3 272.6 -159.5 232.5C-196.8 192.5 -210.1 132.6 -219 77.7C-227.9 22.8 -232.4 -27.1 -220.8 -74.5C-209.2 -122 -181.6 -167 -142.1 -203C-102.7 -239 -51.3 -266 -0.6 -265.2C50.2 -264.4 100.3 -235.7 137.5 -199" fill="#ffffffd4"></path>
                </g>
            </svg>
        </div>
        </div>
    </div>
    <div id="form">

        <div id="form-content">
          <div class="header">
            <div class="header-grid1">
                <img src="https://pdnmghkpepvsfaiqlafk.supabase.co/storage/v1/object/public/nahl%20assets/Sponge%20&%20Soap/spong&Soap%20-%20logo.png" alt="">
            </div>
            <div class="header-grid2"  style="display:none;" >
                <a class="nostyle" href="https://www.spongnsoap.com"><Span style="color: #ffffff;">www.</Span><span style="font-weight: bold;">SpongNSoap</span><span style="font-weight: normal;">.com</span></a>
                <div class="header-grid3">
                    <!-- <img class="social" src="" alt="">  -->
                    <a target="_blank" style="width: 13% !important; margin-right: 5px;"  href="">
                      <img class="social" src="" alt="" >
                    </a>
                     <a target="_blank" style="width: 13% !important;"  href="">
                       <img class="social" src="https://www.dropbox.com/scl/fi/6nhtxruo0qctgwjtzgh51/tik-tok.png?rlkey=b9rvg0uqadhhsckrmu9krxdo5&st=zkobmg85&raw=1" alt="" >
                      </a>
                    <a target="_blank" style="width: 13% !important; margin-right: 5px;"  href="">
                      <img class="social" src="https://www.dropbox.com/scl/fi/yuw8zd98282knix18bgpi/instagram.png?rlkey=ti0e1hqs2bx5lyfyqkbe1qw42&st=4pwkthmh&raw=1" alt="" >
                    </a>
                     <span style="padding-left: 5px;">@SpongeSoap6</span>
                </div>
            </div>
          </div>
            <div id="page1" style="display: flex;">
              <div dir="rtl">
<!--                 <h1>
            1. بنغسل سيارتك بخلطة خاصة مدعّمة بالواكس تحميها من الغبار والخدوش. <br>
2. فوطنا دايمًا نظيفة. <br>
3. ونستخدم إسفنجة مخصوصة للكفرات عشان نهتم بكل تفاصيل سيارتك. <br>


				
                </h1> -->
<h3 style="text-align: center; line-height: 2;">

✨ واكس يحمي سيارتك<br>
🧼 فوط نظيفة & لمعان مضمون<br>
🛞 إسفنجة للكفرات<br><br>
... نهتم بكل التفاصيل
</h3>

<p style="text-align: center; margin-top: 10px;">
<span style="font-weight: bold; font-size: 18px;">#غسيل_بدون_طوابير</span>
</p>

<!-- 
                <br>
                <h2>
                 #غسيل_بدون_طوابير                
                </h2> -->
              </div>
              <div class="filter-button-wrap">
                <button id="page1-button" class="filter-button"> احجز موعدك </button>
              </div>
            </div>  
            <div id="page2" class="fadeIn" style="display: none;">
                <h1 dir="rtl">
                 وين تحب نجيك ؟
                  <br>
                    اختيار المنطقة
                </h1>
                <form onsubmit="handleSubmit(event)" id="page2-form" action="" style="width: 100%;">
                <div id="select2-container" style="position: relative;">
                    <select id="area" class="js-example-basic-single" style="width: 80%" name="state" onchange="setBoundries()" required>
                   
                    </select>
                    <div id="page2-spinner" style=" position: absolute; top: 0; left: 47.6%; display: none  ;">
                  
                      <div class="spinner-border" role="status" style="width: 1.5rem; height: 1.5rem;margin-top:19%;">
                        <span class="sr-only">Loading...</span>
                      </div>
                    </div>
                </div>
			<label for="service">الخدمة</label>
                    <div id="" style="position: relative;">
                      <select id="service" type="text" style="width: 90%;" required></select>
                      <div id="page3-2-spinner" style=" position: absolute; top: 0; left: 47.6%;  ;">
                    
                        <div class="spinner-border" role="status" style="width: 1.5rem; height: 1.5rem;margin-top:19%;">
                          <span class="sr-only">Loading...</span>
                        </div>
                      </div>
                    </div>
                <div style="display: flex; flex-direction: column; margin-top:30px;width: 100%;    align-items: center;
                ">
                
                    
                </div>
			
            </form>
            <div class="filter-button-wrap">
                <button id="page2-button" class="filter-button" style=""> التالي </button>
                </div>
            </div>



            <div id="page3" class="fadeIn" style="display: none;" >
<!-- waiting overlay -->
<div id="page3-wait" style="
  display: none;
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 10;
">
  <div class="spinner-border text-light" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p style="color: #fff; margin-top: 1em; font-size: 1.2em;">
   جاري جلب المواعيد…
  </p>
</div>

                <form onsubmit="handleSubmit(event)"id="page3-form" action="" style="display: flex; flex-direction:column; width: 100%;
    padding: 3%;">
<!--                     <h2>         معلومات إضافية          </h2> -->
                    <label for="serviceCat" style="display:none;">صنف الخدمة</label>
                    <div id="" style="position: relative;display:none;">
                      <select id="serviceCat" type="text" style="width: 100%;" required></select>
                      <div id="page3-1-spinner" style=" position: absolute; top: 0; left: 47.6%; ;">
                    
                        <div class="spinner-border" role="status" style="width: 1.5rem; height: 1.5rem;margin-top:19%;">
                          <span class="sr-only">Loading...</span>
                        </div>
                      </div>
                    </div>
                     <label for="serviceCount" style="display:none;">عدد السيارات</label>
                    <select id="serviceCount" type="text" style="width: 100%;display:none;" required>
                      <option value="1" selected>1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                      <option value="7">7</option>
                      <option value="8">8</option>
                      <option value="9">9</option>
                      <option value="10">10</option>
                    </select>




                </form>
                
                <div id="page3-buttons" >
                  <div id="fail-alert-4" class="alert alert-danger" role="alert" style="display:none;margin-top: 30px;margin-bottom: 0px;">
                    <span></span>
                    <br>
                    <span></span>
                  </div>
                <button id="page3-button" class="filter-button" style="margin-top:30px" hidden> التالي </button>
                <button id="page3-return" class="filter-button" style="margin-top:30px" hidden> السابق </button>
                <!-- <div id="page4-spinner" class="spinner-border" role="status" style="display:none;margin-top: 30px;">
                  <span class="sr-only">Loading...</span>
                </div> -->
            </div>
            </div>
            <div id="page4" class="fadeIn" style="display: none;">
              <h1 dir="rtl">
                 متى تحب نجيك ؟
                <br>
                  اختيار الموعد
              </h1>
              <input type="date" id="date" name="date" class="date form-control" style="text-align: center; width: 50%; vertical-align: middle;">

              <div class="time-date-box" >
                  <div id="time-date-header" class="time-date-header" dir="rtl" hidden>
                      <div id="dayHeader1" class="choosed" style="border-radius: 0px 10px 0px 0px;">
                          <span id="day1" >sunday</span>
                          <br>
                          <span id="day1date">02\11\2013</span>
                      </div>
                      <div id="dayHeader2">
                          <span id="day2">monday</span>
                          <br>
                          <span id="day2date">02\12\2013</span>
                      </div>
                      <div id="dayHeader3" style="border-radius: 10px 0px 0px 0px;">
                          <span id="day3">tuesday</span>
                          <br>
                          <span id="day3date">02\13\2013</span>
                      </div>
                  </div>
                  <div id="time-container" class="time-container" dir="rtl">

                  </div>
                  <div id="fail-alert-3" class="alert alert-danger" role="alert" style="display:none;margin-top: 30px;margin-bottom: 0px;">
                    <span></span>
                    <br>
                    <span></span>
                  </div>
              </div>
              <div class="filter-button-wrap">
              <button id="page4-return" class="filter-button" style=""> السابق </button>
              </div>


          </div> 
            <<div id="page6" class="fadeIn" style="display: none;">
  <form onsubmit="handleSubmit(event)" id="page6-form" action="" style="display: flex; flex-direction:column;">
    <h2>معلومات الاتصال</h2>

    <label for="name">الإسم</label>
    <input id="name" type="text" required />

    <label for="mobile">رقم الجوال</label>
    <div class="phoneCountry" style="color: black;margin:3%;">
      <input type="tel" id="mobile" style="width: 100%;">
    </div>

    <h2></h2>
    <h2>معلومات المركبة</h2>

    <div class="chip" style="position:relative; margin-bottom:1em;">
      <select
        id="carBrand"
        onchange="updateLocationDescription()"
        style="width:100%; padding:0.6em; font-size:1em; border:1px solid #ccc; border-radius:4px;"
      >
        <option value="" disabled selected>🚘 ماركة السيارة</option>
        <option value="Other">Other</option>
        <!-- …other options… -->
      </select>
    </div>

    <div style="display:flex; gap:1em; margin-bottom:1em; flex-wrap:wrap;">
      <div class="chip" style="flex:1; position:relative;">
        <input
          type="text"
          id="carName"
          placeholder="اسم السيارة (GT-R, كامري، إلنترا)"
          oninput="updateLocationDescription()"
          style="width:100%; padding:0.6em; font-size:1em; border:1px solid #ccc; border-radius:4px;"
        />
      </div>
      <div class="chip" style="flex:1; position:relative;">
        <input
          type="text"
          id="plateNumber"
          maxlength="4"
          placeholder="🔢 رقم اللوحة (مثال: 1234)"
          oninput="updateLocationDescription()"
          inputmode="numeric"
          pattern="^\d{1,4}$"
          required
          style="width:100%; padding:0.6em; font-size:1em; border:1px solid #ccc; border-radius:4px;"
        />
      </div>
    </div>

    <div hidden>
      <input
        type="text"
        id="locationDescription"
        readonly
        placeholder="ماركة السيارة, اسم السيارة, رقم اللوحة"
        style="width:100%; padding:0.6em; font-size:1em; border:1px solid #ccc; border-radius:4px;"
      />
    </div>

    <h2>طريقة الدفع</h2>
    <div style="display: flex; flex-direction: row-reverse; justify-content: space-evenly; align-content: center; align-items: center;">
      <div style="flex-grow: 1; flex-basis:0;height: 100%;">
        <label for="Cash" class="radio-label" style="position: relative;height: 100%">
          <input style="position: absolute; opacity: 0;width: 50%;margin: 0;height: 100%;padding: 0;" type="radio" name="payingMethod" class="radios" id="card" value="Cash" required>
          <img class="radio-buttons" src="https://pdnmghkpepvsfaiqlafk.supabase.co/storage/v1/object/public/nahl%20assets/CASH%20LOGO.png" alt="" width="125px">
        </label>
      </div>

      <div style="flex-grow: 1; flex-basis:0;height: 100%;">
        <label for="Telr-Online" class="radio-label" style="position: relative;height: 100%">
          <input style="position: absolute; opacity: 0;width: 50%;margin: 0;height: 100%;padding: 0;" type="radio" name="payingMethod" class="radios" id="card" value="Telr-Online" required>
          <img class="radio-buttons" src="https://pdnmghkpepvsfaiqlafk.supabase.co/storage/v1/object/public/nahl%20assets/STC%20PAY%20LOGO.png" alt="" width="125px">
        </label>
      </div>

      <div style="flex-grow: 1; flex-basis:0;">
        <label for="Telr-Online" class="radio-label" style="position: relative;">
          <input style="position: absolute; opacity: 0;width: 50%;margin: 0;height: 100%;padding: 0;" type="radio" name="payingMethod" class="radios" id="card" value="Telr-Online" required>
          <img class="radio-buttons" src="https://pdnmghkpepvsfaiqlafk.supabase.co/storage/v1/object/public/nahl%20assets/MADA%20LOGO.png" alt="" width="125px">
        </label>
      </div>
    </div>
  </form>

  <div id="page6-buttons">
    <div
      id="fail-alert-5"
      class="alert alert-danger"
      role="alert"
      style="display:none; margin-top: 30px; margin-bottom: 0px;"
    >
      <span></span><br /><span></span>
    </div>

    <button id="page6-button" class="filter-button" style="margin-top:30px"> التالي </button>
    <button id="page6-return" class="filter-button" style="margin-top:30px"> السابق </button>

    <!-- keep spinner for existing JS -->
    <div
      id="page6-spinner"
      style="display:none; flex-direction:column; align-items:center; margin-top:1em;"
    >
      <span class="mt-3"></span>
      <div
        class="spinner-border"
        role="status"
        style="display:none; margin-top:30px;"
      >
        <span class="sr-only">Loading...</span>
      </div>
    </div>
  </div>
</div>


<div id="page5" class="fadeIn" style="display: none;">
  <!-- Map Label -->
  <label for="googleMap" style="font-size: 1.5em;">الموقع على خريطة قوقل</label>

  <div id="drag-instructions">
    <i class="fas fa-hand-point-right" id="drag-icon"></i>
    <p>📍 اسحب الخريطة لتغيير الموقع</p>
  </div>

  <div
    id="googleMap"
    style="width:100%; height:400px; margin: 3% 0; color: #493a68;"
  ></div>

  <p style="text-align:center; font-size:14px; color:#333; margin-bottom:10px;">
    📍 <strong>قم بسحب المؤشر أو اضغط على اظهار موقعي</strong>
  </p>

  <button
    class="filter-button"
    id="show-my-location"
    style="border-radius:0; width:100%; margin-bottom:1em;"
  >
    اظهار موقعي
  </button>

  <!-- kept for JS symmetry; not used to submit here -->
  <form
    onsubmit="handleSubmit(event)"
    id="page5-form"
    action=""
    style="display:flex; flex-direction:column; width:100%; padding-bottom:3%;"
  ></form>

  <div id="page5-buttons">
    <div
      id="fail-alert-5"
      class="alert alert-danger"
      role="alert"
      style="display:none; margin:30px 0 0;"
    >
      <span></span><br /><span></span>
    </div>

    <button
      id="page5-button"
      class="filter-button"
      style="margin-top:30px; width:100%;"
    >
      التالي
    </button>

    <button
      id="page5-return"
      class="filter-button"
      style="margin-top:30px; width:100%;"
    >
      السابق
    </button>

    <div
      id="page5-spinner"
      style="display:none; flex-direction:column; align-items:center; margin-top:1em;"
    >
      <span class="mt-3"></span>
      <div
        class="spinner-border"
        role="status"
        style="display:none; margin-top:30px;"
      >
        <span class="sr-only">Loading...</span>
      </div>
    </div>
  </div>
</div>



            
            <div id="page7" class="fadeIn" style="display: none;" dir="rtl" >
               <h1>
شكرا لكم
                </h1>
               <h2 dir="rtl">
تم حجز الموعد، وراح نأكده لكم على الواتساب
               </h2>
               <h3>
متحمسين نجيكم!!
	 </h3><div class="filter-button-wrap">
                <button id="rebook" class="filter-button rebook-button">
  🔁 حجز جديد
</button>

                </div>
            </div>  
            <footer dir="rtl" style="text-align: center; margin-top: 20px;">
              <p>
Sponge & Soap
              </p>
              	<a target="_blank" href="https://www.instagram.com/nahl.app?igsh=Y3YyOW05MGI5bnNv&utm_source=qr" <p>
 Made with Nahl Perfection
              </p></a>
              <p>

              </p>
              </footer>
        </div>

    </div>
<a target="_blank"
   href="https://wa.me/966503668222"
   class="social-fab whatsapp-button"
   aria-label="تواصل عبر واتساب">
  <i class="fab fa-whatsapp" aria-hidden="true"></i>
</a>

<a target="_blank"
   href="https://www.instagram.com/sponge.soap_sa?igsh=MWRtOHI5OHZpbWpvdA=="
   class="social-fab instagram-button"
   aria-label="تابعنا على إنستغرام">
  <i class="fab fa-instagram" aria-hidden="true"></i>
</a>

<a target="_blank"
   href="https://www.tiktok.com/@sponge.soap_sa?_t=ZS-8zaj1CA4aJg&_r=1"
   class="social-fab tiktok-button"
   aria-label="تابعنا على تيك توك">
  <i class="fab fa-tiktok" aria-hidden="true"></i>
</a>
<!-- ===================== TERMS MODAL (NEW) ===================== -->
<div class="modal fade" id="termsModal" tabindex="-1" aria-hidden="true" dir="rtl">
  <div class="modal-dialog modal-dialog-scrollable modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">الشروط والأحكام – مغسلة سيارات متنقلة</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="إغلاق"></button>
      </div>
      <div class="modal-body" style="text-align: right;">
        <ol style="padding-right: 1rem;">
          <li><strong>الخدمات المقدمة</strong>
            <ul>
              <li>تقدم المغسلة خدمات غسيل وتنظيف السيارات وفق الباقات المعروضة على الموقع أو حسب الاتفاق المسبق.</li>
            </ul>
          </li>
          <li><strong>حجز المواعيد</strong>
            <ul>
              <li>يتم الحجز عبر الموقع أو من خلال التواصل المباشر.</li>
              <li>يحق للمغسلة تعديل أو إلغاء الموعد في حال وجود ظرف طارئ مع إشعار العميل.</li>
            </ul>
          </li>
          <li><strong>الدفع</strong>
            <ul>
              <li>يتم الدفع عبر الوسائل المتاحة (تحويل بنكي، مدى، بطاقة إئتمانية، STC Bank، Apple Pay، نقدًا).</li>
              <li>يجب سداد المبلغ كاملاً قبل بدء الخدمة. وفي حال عدم السداد يحق للمغسلة إلغاء الموعد.</li>
            </ul>
          </li>
          <li><strong>إلغاء الخدمة واسترجاع المبلغ</strong>
            <ul>
              <li>في حال إلغاء الحجز قبل 3 ساعات من الموعد، يحق للعميل استرداد المبلغ أو إعادة جدولة الموعد.</li>
              <li>لا يحق للعميل طلب استرداد المبلغ أو جدولة الموعد في حال تم الإلغاء خلال أقل من 3 ساعات.</li>
            </ul>
          </li>
          <li><strong>مسؤولية المغسلة</strong>
            <ul>
              <li>تلتزم المغسلة بتقديم الخدمة بأفضل جودة ممكنة باستخدام مواد آمنة.</li>
              <li>المغسلة غير مسؤولة عن أي أعطال ميكانيكية أو كهربائية أو تلفيات سابقة في السيارة.</li>
              <li>في حال وقوع ضرر ناتج عن خطأ مباشر من فريق العمل، تتحمل المغسلة مسؤولية تعويض عادل يقتصر على قيمة الضرر المباشر.</li>
            </ul>
          </li>
          <li><strong>مسؤولية العميل</strong>
            <ul>
              <li>يجب على العميل إزالة أو إخلاء السيارة من أي متعلقات شخصية أو ثمينة قبل بدء الخدمة.</li>
              <li>المغسلة غير مسؤولة عن فقدان أو تلف أي أغراض شخصية تُترك داخل السيارة.</li>
              <li>توفير مكان مناسب وآمن لإتمام الخدمة (موقف، تصريح دخول، إلخ).</li>
            </ul>
          </li>
          <li><strong>الوقت والتأخير</strong>
            <ul>
              <li>مدة الخدمة تقريبية وقد تختلف حسب حالة السيارة.</li>
              <li>يلتزم العميل بالتواجد في الموقع بالوقت المحدد، والتأخير عن الموعد كحد اقصى 15 دقيقة ويعتبر الموعد لاغيًا بعد هذه المدة.</li>
            </ul>
          </li>
          <li><strong>التعديلات على الشروط والأحكام</strong>
            <ul>
              <li>تحتفظ المغسلة بحق تعديل أو تحديث هذه الشروط والأحكام في أي وقت.</li>
              <li>تعتبر موافقة العميل على الخدمة قبولًا لهذه الشروط والأحكام.</li>
            </ul>
          </li>
          <li><strong>القانون المعمول به</strong>
            <ul>
              <li>تخضع هذه الشروط والأحكام لأنظمة وقوانين المملكة العربية السعودية.</li>
            </ul>
          </li>
        </ol>

        <div class="form-check mt-2">
          <input class="form-check-input" type="checkbox" id="termsAccept">
          <label class="form-check-label" for="termsAccept">أوافق على الشروط والأحكام</label>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
        <button class="btn btn-primary" id="confirmTerms" disabled>تأكيد ومتابعة</button>
      </div>
    </div>
  </div>
</div>
<!-- =================== /TERMS MODAL (NEW) =================== -->
</body>
<script>

function addService(element) {
  element.classList.toggle("active");

  // Collect selected chips
  let selectedServices = [];
  document.querySelectorAll(".chip.active").forEach(function(chip) {
    selectedServices.push(chip.textContent.trim());
  });

  // Update the textarea with selected services
  document.getElementById("locationDescription").value = selectedServices.join(", ");
}

	
      const input = document.querySelector("#mobile");
    const countryCodeInput = window.intlTelInput(input, {
      utilsScript: "https://cdn.jsdelivr.net/npm/intl-tel-input@24.4.0/build/js/utils.js",
      countryOrder:["sa","qa"],
      initialCountry:"sa",
      onlyCountries:["sa","qa","ae","om","kw","bh"],
      excludeCountries:["il"],
      strictMode:true,
      i18n:{
    ac:"جزيرة أسينشين",
    ad: "أندورا",
    ae: "الإمارات العربية المتحدة",
    af: "أفغانستان",
    ag: "أنتيغوا وبربودا",
    ai: "أنغويلا",
    al: "ألبانيا",
    am: "أرمينيا",
    ao: "أنغولا",
    ar: "الأرجنتين",
    as: "ساموا الأمريكية",
    at: "النمسا",
    au: "أستراليا",
    aw: "أروبا",
    ax: "جزر آلاند",
    az: "أذربيجان",
    ba: "البوسنة والهرسك",
    bb: "بربادوس",
    bd: "بنغلاديش",
    be: "بلجيكا",
    bf: "بوركينا فاسو",
    bg: "بلغاريا",
    bh: "البحرين",
    bi: "بوروندي",
    bj: "بنين",
    bl: "سان بارتليمي",
    bm: "برمودا",
    bn: "بروناي",
    bo: "بوليفيا",
    bq: "هولندا الكاريبية",
    br: "البرازيل",
    bs: "جزر البهاما",
    bt: "بوتان",
    bw: "بوتسوانا",
    by: "بيلاروس",
    bz: "بليز",
    ca: "كندا",
    cc: "جزر كوكوس (كيلينغ)",
    cd: "الكونغو - كينشاسا",
    cf: "جمهورية أفريقيا الوسطى",
    cg: "الكونغو - برازافيل",
    ch: "سويسرا",
    ci: "ساحل العاج",
    ck: "جزر كوك",
    cl: "تشيلي",
    cm: "الكاميرون",
    cn: "الصين",
    co: "كولومبيا",
    cr: "كوستاريكا",
    cu: "كوبا",
    cv: "الرأس الأخضر",
    cw: "كوراساو",
    cx: "جزيرة كريسماس",
    cy: "قبرص",
    cz: "التشيك",
    de: "ألمانيا",
    dj: "جيبوتي",
    dk: "الدانمرك",
    dm: "دومينيكا",
    do: "جمهورية الدومينيكان",
    dz: "الجزائر",
    ec: "الإكوادور",
    ee: "إستونيا",
    eg: "مصر",
    eh: "الصحراء الغربية",
    er: "إريتريا",
    es: "إسبانيا",
    et: "إثيوبيا",
    fi: "فنلندا",
    fj: "فيجي",
    fk: "جزر فوكلاند",
    fm: "ميكرونيزيا",
    fo: "جزر فارو",
    fr: "فرنسا",
    ga: "الغابون",
    gb: "المملكة المتحدة",
    gd: "غرينادا",
    ge: "جورجيا",
    gf: "غويانا الفرنسية",
    gg: "غيرنزي",
    gh: "غانا",
    gi: "جبل طارق",
    gl: "غرينلاند",
    gm: "غامبيا",
    gn: "غينيا",
    gp: "غوادلوب",
    gq: "غينيا الاستوائية",
    gr: "اليونان",
    gt: "غواتيمالا",
    gu: "غوام",
    gw: "غينيا بيساو",
    gy: "غيانا",
    hk: "هونغ كونغ الصينية (منطقة إدارية خاصة)",
    hn: "هندوراس",
    hr: "كرواتيا",
    ht: "هايتي",
    hu: "هنغاريا",
    id: "إندونيسيا",
    ie: "أيرلندا",
    im: "جزيرة مان",
    in: "الهند",
    io: "الإقليم البريطاني في المحيط الهندي",
    iq: "العراق",
    ir: "إيران",
    is: "آيسلندا",
    it: "إيطاليا",
    je: "جيرسي",
    jm: "جامايكا",
    jo: "الأردن",
    jp: "اليابان",
    ke: "كينيا",
    kg: "قيرغيزستان",
    kh: "كمبوديا",
    ki: "كيريباتي",
    km: "جزر القمر",
    kn: "سانت كيتس ونيفيس",
    kp: "كوريا الشمالية",
    kr: "كوريا الجنوبية",
    kw: "الكويت",
    ky: "جزر كايمان",
    kz: "كازاخستان",
    la: "لاوس",
    lb: "لبنان",
    lc: "سانت لوسيا",
    li: "ليختنشتاين",
    lk: "سريلانكا",
    lr: "ليبيريا",
    ls: "ليسوتو",
    lt: "ليتوانيا",
    lu: "لوكسمبورغ",
    lv: "لاتفيا",
    ly: "ليبيا",
    ma: "المغرب",
    mc: "موناكو",
    md: "مولدوفا",
    me: "الجبل الأسود",
    mf: "سان مارتن",
    mg: "مدغشقر",
    mh: "جزر مارشال",
    mk: "مقدونيا الشمالية",
    ml: "مالي",
    mm: "ميانمار (بورما)",
    mn: "منغوليا",
    mo: "منطقة ماكاو الإدارية الخاصة",
    mp: "جزر ماريانا الشمالية",
    mq: "جزر المارتينيك",
    mr: "موريتانيا",
    ms: "مونتسرات",
    mt: "مالطا",
    mu: "موريشيوس",
    mv: "جزر المالديف",
    mw: "ملاوي",
    mx: "المكسيك",
    my: "ماليزيا",
    mz: "موزمبيق",
    na: "ناميبيا",
    nc: "كاليدونيا الجديدة",
    ne: "النيجر",
    nf: "جزيرة نورفولك",
    ng: "نيجيريا",
    ni: "نيكاراغوا",
    nl: "هولندا",
    no: "النرويج",
    np: "نيبال",
    nr: "ناورو",
    nu: "نيوي",
    nz: "نيوزيلندا",
    om: "عُمان",
    pa: "بنما",
    pe: "بيرو",
    pf: "بولينيزيا الفرنسية",
    pg: "بابوا غينيا الجديدة",
    ph: "الفلبين",
    pk: "باكستان",
    pl: "بولندا",
    pm: "سان بيير ومكويلون",
    pr: "بورتوريكو",
    ps: "الأراضي الفلسطينية",
    pt: "البرتغال",
    pw: "بالاو",
    py: "باراغواي",
    qa: "قطر",
    re: "روينيون",
    ro: "رومانيا",
    rs: "صربيا",
    ru: "روسيا",
    rw: "رواندا",
    sa: "المملكة العربية السعودية",
    sb: "جزر سليمان",
    sc: "سيشل",
    sd: "السودان",
    se: "السويد",
    sg: "سنغافورة",
    sh: "سانت هيلينا",
    si: "سلوفينيا",
    sj: "سفالبارد وجان ماين",
    sk: "سلوفاكيا",
    sl: "سيراليون",
    sm: "سان مارينو",
    sn: "السنغال",
    so: "الصومال",
    sr: "سورينام",
    ss: "جنوب السودان",
    st: "ساو تومي وبرينسيبي",
    sv: "السلفادور",
    sx: "سانت مارتن",
    sy: "سوريا",
    sz: "إسواتيني",
    tc: "جزر توركس وكايكوس",
    td: "تشاد",
    tg: "توغو",
    th: "تايلاند",
    tj: "طاجيكستان",
    tk: "توكيلو",
    tl: "تيمور - ليشتي",
    tm: "تركمانستان",
    tn: "تونس",
    to: "تونغا",
    tr: "تركيا",
    tt: "ترينيداد وتوباغو",
    tv: "توفالو",
    tw: "تايوان",
    tz: "تنزانيا",
    ua: "أوكرانيا",
    ug: "أوغندا",
    us: "الولايات المتحدة",
    uy: "أورغواي",
    uz: "أوزبكستان",
    va: "الفاتيكان",
    vc: "سانت فنسنت وجزر غرينادين",
    ve: "فنزويلا",
    vg: "جزر فيرجن البريطانية",
    vi: "جزر فيرجن التابعة للولايات المتحدة",
    vn: "فيتنام",
    vu: "فانواتو",
    wf: "جزر والس وفوتونا",
    ws: "ساموا",
    xk:"كوسوفو",
    ye: "اليمن",
    yt: "مايوت",
    za: "جنوب أفريقيا",
    zm: "زامبيا",
    zw: "زيمبابوي"
  },
    });
    const errorMap = ["رقم غير صحيح", "رمز دولة غير صحيح", "المُدخل أقصر من المتوقع", "المُدخل أطول من المتوقع", "رقم غير صحيح"];
    input.addEventListener("change", () =>{
      console.log(countryCodeInput.getNumber().substring(1))
      console.log(countryCodeInput.isValidNumber())
      const msg = errorMap[countryCodeInput.getValidationError()] || "رقم غير صحيح";
      console.log(msg);
      console.log(countryCodeInput.getSelectedCountryData().dialCode)
      
    })
var DateTime = luxon.DateTime;
    var userLang = navigator.language || navigator.userLanguage; 
    if(userLang.includes("ar")){
    // alert ("The language is:AR " + userLang);
    document.getElementById("date").setAttribute("dir","rtl")

    } else{
    document.getElementById("date").setAttribute("dir","ltr")

    }
let locale = "ar"
const translations = {
  // English translations
  "en": {
    "app-title": "Departements List",
    "add-new": "Add new",
    "show-added": "Show Added",
      "search-box": {
     "attribute":"placeholder",
     "search" : "Search"
    },
    "service-category-id": "Service Category ID",
    "cat-num": "Category No.",

    "arabic-name": "Arabic Name",
    "english-name": "English Name",

    "service-name-ar": "Service Name in Arabic",
    "service-name-en": "Service Name in English",
    "cat-name": "Category Name",
    "price": "Price",
    "price-no-vat":"Service Price w/o VAT",
    "vat":"VAT",  
    "vat-amount":"VAT Amount",
    "price-with-vat": "Price with VAT",
    "serial-num":"Serial Number",
    "data-submitted":"Data Has Been Submitted Successfully",
    "cancel" : "Cancel",
    "save" : "Save",
    "edit": "Edit",
    "delete": "Delete",
    "deleted":"Deleted",
    "confirm-deletion":"Confirm Deletion",
    "add-loc" :"Add Location",
    "location" : "Location",
    "locations" : "Locations",
    "servicesCat":{},
    "services":{},
    "locationsTrans":{},
  },
  // Arabic translations
  "ar": {
    "app-title": "قائمة الأقسام",
    "add-new": "اضافة قسم",
    "show-added": "عرض الأقسم",
      "search-box": {
     "attribute":"placeholder",
     "search" : "ابحث"
    },
    "service-category-id": "رقم الصنف",
    "cat-num": "رقم القسم",

    "arabic-name": "الاسم باللغة العربية",
    "english-name": "الاسم باللغة الانجليزية",

    "service-name-ar": "اسم الخدمة باللغة العربية",
    "service-name-en": "اسم الخدمة باللغة الإنجليزية",
    "cat-name": "اسم الصنف",
    "price": "السعر",
    "price-no-vat":"سعر الخدمة بدون الضريبة",
    "vat":"الضريبة",
    "vat-amount":"قيمة الضريبة",
    "price-with-vat": "السعر مع الضريبة",
    "serial-num":"الرقم التسلسلي",
    "data-submitted":"تم إرسال البيانات بنجاح",
    "cancel" : "إلغاء",
    "save" : "حفظ",
     "edit": "تعديل",
    "delete": "حذف",
    "deleted":"تم الحذف",
    "confirm-deletion":"تأكيد الحذف",
    "add-loc" :"اضافة منطقة",
    "location" : "منطقة",
    "locations" : "المناطق",
    "servicesCat":{},
    "services":{},
    "locationsTrans":{},
  },
};
// load user data 
try {
  document.getElementById("name").value = localStorage.getItem("name")
  if(localStorage.getItem("mobile")){
    countryCodeInput.setNumber("+"+ localStorage.getItem("mobile"))
  }
} catch (error) {
  console.log("new uesr")
}

document.getElementById("date").setAttribute("min", new Date().toLocaleDateString("fr-ca"))
const defaultLink2 = `https://nahl-platform.vercel.app/api/app/AM/general/${'33e0d05d-d771-46f4-a7e7-7c634b4e3a9e'}/form`
const acceptedHourdiff = 1;
const acceptedMindiff = 30;
var mydata = ""
let controllers = []
let services 
let serviceCategories
async function callContent(routText, callback,abortable = false){
  let signal = ''
  if (abortable) {
    if( controllers.length > 0 ){
    for (let i = 0; i < controllers.length; i++) {
      const element = controllers[i];

      element[0].abort()
    }
    controllers = []
    }
    const controller = new AbortController()
    signal = controller.signal
    controllers.push([controller, signal])
  }
  await new Promise(resolve => setTimeout(resolve, 1000)); 

	fetch(defaultLink +`?content=${routText}`, {
		   redirect: "follow",
		   method: "GET",
       ...(abortable && { signal }), 
		 }).then(async (response) => {
	
     let originalResponse = response
	
     let jsonresponse = await originalResponse.json()

		 
		  callback(jsonresponse);
	 }).catch(err => {
		 console.log("Error:" + err);
	 });
}
async function callContent2(routText, callback,abortable = false, retries=3){
  let signal = ''
  if (abortable) {
    if( controllers.length > 0 ){
    for (let i = 0; i < controllers.length; i++) {
      const element = controllers[i];
      // console.log(controllers)
      // console.log(element)
      element[0].abort()
    }
    controllers = []
    }
    const controller = new AbortController()
    signal = controller.signal
    controllers.push([controller, signal])
  }
  await new Promise(resolve => setTimeout(resolve, 1000)); // Sleep for 1 seconds (1000 milliseconds)

	fetch(defaultLink2 +`${routText}`, {
		   redirect: "follow",
		   method: "GET",
       ...(abortable && { signal }), // Include signal if condition is true
		 }).then(async (response) => {
      if (!response.ok) {
        if (retries > 0) {
          console.log("retry: ", retries)
          return callContent2(routText, callback, abortable, retries-1)
        }else {
          throw new Error('Network response was not ok');
        }
      }
		
     let originalResponse = response
	
     let jsonresponse = await originalResponse.json()
 
		 
		  callback(jsonresponse);
	 }).catch(err => {
		 console.log("Error:" + err);
     if(!err.message.includes("aborted")){
      setTimeout(()=>{
      if (retries > 0) {
          console.log("retry: ", retries)
          return callContent2(routText, callback, abortable, retries-1)
        }else {
          throw new Error('Network response was not ok');
        }
     }, 2000);
     }
	 });
}
// gets active locations
document.getElementById("page2-spinner").style.display = "block"
let nLocations = callContent2(`/locations`,(data) => {

  console.log(data);
   
    if(!data.success){

    }
    let locations = data.data
    let selectData = [{id:0, text:"test"}]
    for(let i=0; i<locations.length; i++){
        selectData[i] = {id:locations[i]["id"], text:locations[i]["TS_location_arabic_name"]}
      }
      selectData.sort((a, b) => a.id - b.id);
    $('.js-example-basic-single').select2({
          data:selectData,
          width: "90%",
      });
      $('#area').trigger('change')
    for(let i=0; i<locations.length; i++){
      translations.en["locationsTrans"][locations[i]["TS_location_english_name"].toLowerCase()] = locations[i]["TS_location_english_name"];
      translations.ar["locationsTrans"][locations[i]["TS_location_english_name"].toLowerCase()] = locations[i]["TS_location_arabic_name"]; 
    }
    document.getElementById("page2-spinner").style.display = "none"
})



    // $("#date").datepicker({
    //     format: "dd-mm-yyyy",
    //   });
    var data = [
    {
        id: 0,
        text: 'enhancement'
    },
    {
        id: 1,
        text: 'bug'
    },
    {
        id: 2,
        text: 'duplicate'
    },
    {
        id: 3,
        text: 'invalid'
    },
    {
        id: 4,
        text: 'wontfix'
    }
];

var formData = [];
var nForm =  {
                date:'' ,
                time:'' ,
                location:'',
                service: '',
                serviceCount:'',
                serviceCat: '',
                customerM: '',
                customerN: '',
                paymentMethod:'',
                urlLocation:'',
                locationDescription:''
              }
let day1 = new Date()
day1= dayjs()
day1 = DateTime.now()
// day1 =DateTime.fromISO('2024-10-01')
let day2 = new Date()
// day2.setDate(day1.getDate() + 1)
day2 =  dayjs().add(1, 'day')
day2 = day1.plus({days:1})
let day3 = new Date()
// day3.setDate(day1.getDate() + 2)
day3 =  dayjs().add(2, 'day')
day3 = day1.plus({days:2})
let dates =[day1,day2,day3]
let weekdays = [];
weekdays[0] = "الأحد";
weekdays[1] = "الإثنين";
weekdays[2] = "الثلاثاء";
weekdays[3] = "الأربعاء";
weekdays[4] = "الخميس";
weekdays[5] = "الجمعة";
weekdays[6] = "السبت";
weekdays[7] = "الأحد";

let weekdaysEn = [];
weekdaysEn[0] = "Sunday";
weekdaysEn[1] = "Monday";
weekdaysEn[2] = "Tuesday";
weekdaysEn[3] = "Wednesday";
weekdaysEn[4] = "Thursday";
weekdaysEn[5] = "Friday";
weekdaysEn[6] = "Saturday";
let appointments = [[],[],[]]
let ActualTimes = [[],[],[]]
let timesLoaded = false;
document.getElementById('date').onchange = () => {
  document.getElementById('date').disabled = true;
  $("#time-contaier").empty()
  document.getElementById('time-container').innerHTML =''
  document.getElementById('time-container').innerHTML = `
  <div id="department-spinner" class="spinner-border" role="status" style="grid-column-start: span 3;justify-self: center;">
              <span class="sr-only">Loading...</span>
            </div>
            `
  ActualTimes = [[],[],[]]            
  appointments = [[],[],[]]
  timesLoaded = false;

  day1 = DateTime.fromISO(document.getElementById('date').value)
  day2 = day1.plus({days:1})
  day3 = day1.plus({days:2})
  let datesSet = [day1,day2,day3]

  for(let i = 1; i <= 3 ; i ++){
    document.getElementById(`day${i}`).innerText = weekdays[datesSet[i-1].weekday];
    document.getElementById(`day${i}date`).innerText = datesSet[i-1].toFormat('yyyy-MM-dd');
 
  }

  callContent2(`/appointments?startDate=${day1.toFormat('yyyy-MM-dd')}&location=${document.getElementById("area").value}&service=${document.getElementById("service").value}`, (data) => {

    // set loading 
    document.getElementById('time-container').innerHTML = `
  <div id="department-spinner" class="spinner-border" role="status" style="grid-column-start: span 3;justify-self: center;">
              <span class="sr-only">Loading...</span>
            </div>
            `
    appointments = [[],[],[]]
      let recievedDates = data.data.appointments; 

      console.log(data);
      let tempActualTimes = []
      for(let i = 0; i < recievedDates.length ; i ++){
        let x = DateTime.fromISO(recievedDates[i]['TS_appointment_date'], { setZone: true });
        let y = DateTime.fromISO(recievedDates[i]['TS_appointment_time'], { setZone: true });
        recievedDates[i]['TS_appointment_date'] = x.toISODate()
        recievedDates[i]['TS_appointment_time'] = y.toLocaleString(DateTime.TIME_SIMPLE).replace(" ", " ")
        tempActualTimes[i] = y.toFormat('hh:mm a')

      }
      console.log(day1.toFormat('yyyy-MM-dd'),day2.toFormat('yyyy-MM-dd'),day3.toFormat('yyyy-MM-dd'));
      console.log(recievedDates);

      for(let i = 0; i < recievedDates.length ; i ++){

        if (recievedDates[i]["TS_appointment_date"] == day1.toFormat('yyyy-MM-dd')){
          appointments[0].push(recievedDates[i]['TS_appointment_time'])
          ActualTimes[0].push(tempActualTimes[i])
        }else if (recievedDates[i]["TS_appointment_date"] == day2.toFormat('yyyy-MM-dd')){
          appointments[1].push(recievedDates[i]['TS_appointment_time'])
          ActualTimes[1].push(tempActualTimes[i])
        }else if (recievedDates[i]["TS_appointment_date"] == day3.toFormat('yyyy-MM-dd')){
          appointments[2].push(recievedDates[i]['TS_appointment_time'])
          ActualTimes[2].push(tempActualTimes[i])
        }
      }
      console.log(appointments);
      // timesLoaded = true;
      // $("#dayHeader1").trigger("click")
// timesLoaded = true;
// renderAllThreeDays();
timesLoaded = true;
timesSetter(0); // ✅ Only load one day's times
      document.getElementById('date').disabled = false;

  }, abortable = true )

  
  
 }


document.getElementById('date').value = DateTime.now().toFormat('yyyy-MM-dd');

$("#area").on("change", () => {

  document.getElementById("page3-1-spinner").style.display = "block"
  document.getElementById("page3-2-spinner").style.display = "block"
  document.getElementById('serviceCat').innerHTML = ''
  document.getElementById('service').innerHTML = ''
  callContent2(`/services?location=${document.getElementById("area").value}`, (data) => {

      services = data.data.services
      serviceCategories = data.data.servicesCat

      const categoriesWithServices = {};



      services.forEach(service => {
        const categoryID = service.TS_category_id;
        if (!categoriesWithServices[categoryID]) {

          categoriesWithServices[categoryID] = {
            category: serviceCategories.find(cat => cat.TS_category_id === categoryID),
            services: [],
            locations: new Set()
          };
        }
        categoriesWithServices[categoryID].services.push(service);
        service.location.forEach(location => {
          categoriesWithServices[categoryID].locations.add(location);
        });
      });
      for (let j = 0; j < services.length; j++) {
        const element = services[j];
        translations.ar['services'][element.TS_service_english_name.toLowerCase()] = element.TS_service_arabic_name
        translations.en['services'][element.TS_service_english_name.toLowerCase()] = element.TS_service_english_name
      }
      for (let j = 0; j < serviceCategories.length; j++) {
        const element = serviceCategories[j];
        translations.ar['servicesCat'][element.TS_category_english_name.toLowerCase()] = element.TS_category_arabic_name
        translations.en['servicesCat'][element.TS_category_english_name.toLowerCase()] = element.TS_category_english_name
      }
      // now update the services and category based on the choosen location
      servicesDropdownLoader2(categoriesWithServices)
        document.getElementById("page3-1-spinner").style.display = "none"
        document.getElementById("page3-2-spinner").style.display = "none"
  }, abortable = true )
    // $('#date').trigger('change'); 
})

function timesSetter (index) {
  // change times here
    let timeContainer = document.getElementById("time-container");
    $("#time-container").empty()
    timeContainer.innerHTML = "";
    if(appointments[index].length == 0){
        document.getElementById('time-container').innerHTML = `

  <div id="department-spinner" class="" role="status" style="grid-column-start: span 3;justify-self: center;">
              <span class="color:">لا توجد مواعيد متاحة</span>
            </div>
            `
    }
 
    for (let y = 0; y < appointments[index].length; y++) {

        timeContainer.innerHTML += `<button onclick="choosedDate('${ActualTimes[index][y]}','${document.getElementById(`day${index+1}date`).innerText}',${4})" class="time-button" dir="ltr">
                    ${appointments[index][y]}
                </button>`;



}}



for(let i = 1; i <= 3 ; i ++){
  document.getElementById(`day${i}`).innerText = weekdays[dates[i-1].weekday];
  document.getElementById(`day${i}date`).innerText = dates[i-1].toFormat('yyyy-MM-dd');; 
}
$(document).ready(function() {

});
$('#test').on('click', function(event) { 
  $('.select2').select2({width: '100%'});
})

for (let i = 1; i < 7; i++) {
  if (i == 4) continue;
  let pb1 = document.getElementById(`page${i}-button`);
  let p1 = document.getElementById(`page${i}`);
  let p2 = document.getElementById(`page${i+1}`);

  if ( i == 2){
    pb1.onclick = async () => {
      let field1 = document.getElementById("area")
      if (field1.value == "" ){
        infoWindow.setPosition(map.getCenter());
        infoWindow.setContent("الرجاء تحديد الموقع");
        infoWindow.open(map);
        document.getElementById("page2-form").reportValidity()
        return
      }
      p1.classList.remove("fadeIn");
      p1.classList.add("fadeOut");
      p2.classList.remove("fadeOut");
      p2.classList.add("fadeIn");
      setTimeout(() => {
        p1.style.display = "none";
        p2.style.display = "flex";
      }, "1000")
      formData[0] = field1.value
      nForm.location = document.getElementById("area").value
    }
  } else if ( i == 3){
    pb1.onclick = () => {
      let field3 = document.getElementById("serviceCat")
      let field4 = document.getElementById("service")
      let serviceCount = document.getElementById("serviceCount")
      let payingMethod = ''
      let form = document.getElementById("page3-form")
      try {
        if(parseInt(serviceCount.value) <=0 || parseInt(serviceCount.value) >10 ){
          if(locale == "en"){ serviceCount.setCustomValidity("Must be between 1 and 10"); }
          else { serviceCount.setCustomValidity("لابد أن يكون بين 1 و 10"); }
          throw new Error("bad count")
        }
      } catch (error) {
        form.reportValidity()
        return
      }
      if (field3.value == "" || field4.value == "" ){
        if ( field3.value == ""){ field3.style.borderColor='red'; field3.style.borderWidth='thin'; }
        else{ field3.style.borderColor='green'; field3.style.borderWidth='thin'; }
        if ( field4.value == ""){ field4.style.borderColor='red'; field4.style.borderWidth='thin'; }
        else{ field4.style.borderColor='green'; field4.style.borderWidth='thin'; }
        return
      }else {
        field3.style.borderColor='green';
        field3.style.borderWidth='thin';
        field4.style.borderColor='green';
        field4.style.borderWidth='thin';
      }
      formData[5] = countryCodeInput.getNumber().substring(1)
      formData[6] = field3.value
      formData[7] = field4.value
      formData[8] = payingMethod

      nForm.customerN = document.getElementById("name").value.trim()
      nForm.serviceCat = document.getElementById("serviceCat").value
      nForm.service = document.getElementById("service").value
      nForm.serviceCount = serviceCount.value

      p1.classList.remove("fadeIn");
      p1.classList.add("fadeOut");
      p2.classList.remove("fadeOut");
      p2.classList.add("fadeIn");
      setTimeout(() => { p1.style.display = "none"; p2.style.display = "flex"; }, "1000")
    }
  } else if ( i == 5){
    // Page 5 is now the MAP page: ensure a position is chosen before moving on
    pb1.onclick = () => {
      if (position == "") {
        infoWindow.setPosition(map.getCenter());
        infoWindow.setContent("الرجاء تحديد الموقع");
        infoWindow.open(map);
        return;
      }
      // go next
      p1.classList.remove("fadeIn");
      p1.classList.add("fadeOut");
      p2.classList.remove("fadeOut");
      p2.classList.add("fadeIn");
      setTimeout(() => { p1.style.display = "none"; p2.style.display = "flex"; }, "1000");
    };
  } else if ( i == 6){
    // Page 6 now has contact + car + payment, and shows Terms before submit
    pb1.onclick = () => {
      let field1 = document.getElementById("name")
      let form = document.getElementById("page6-form")
      let payingMethod = ''
      try {
        payingMethod = document.querySelector('input[name="payingMethod"]:checked').value;
        if(field1.value.trim() == ""){
          if(locale == "en"){ field1.setCustomValidity("Required field"); }
          else { field1.setCustomValidity("يُرجى ملئ هذا الحقل"); }
          throw new Error("no name")
        }
      } catch (error) {
        form.reportValidity()
        return
      }
      if (!checkNumberValidity() ){
        form.reportValidity()
        return
      }

      // Cache form values
      nForm.paymentMethod = payingMethod
      formData[4] = field1.value
      formData[5] = countryCodeInput.getNumber().substring(1)
      formData[8] = payingMethod
      nForm.customerN = document.getElementById("name").value.trim()
      nForm.customerM = countryCodeInput.getNumber().substring(1)

      // Open Terms modal
      const termsModalEl = document.getElementById('termsModal');
      const termsModal = new bootstrap.Modal(termsModalEl);
      const acceptCheckbox = document.getElementById('termsAccept');
      const confirmBtn = document.getElementById('confirmTerms');

      // reset state each time
      acceptCheckbox.checked = false;
      confirmBtn.disabled = true;

      acceptCheckbox.onchange = () => {
        confirmBtn.disabled = !acceptCheckbox.checked;
      };

      termsModal.show();

      // When confirmed, proceed with the original submit flow
      confirmBtn.onclick = () => {
        termsModal.hide();

        document.getElementById(`page${i}-return`).style.display = "none";
        pb1.style.display = "none";
        let pageSpinner = document.getElementById(`page${i}-spinner`);
        let failAlert = document.getElementById(`fail-alert-5`)
        failAlert.style.display = "none";
        pageSpinner.style.display = "flex"
        pageSpinner.children[0].style.display = "block"
        pageSpinner.children[1].style.display = "block"

        // ensure map position captured previously
        formData[1] = position
        nForm.urlLocation = position

        try {
          let x = document.getElementById("locationDescription");
          if(x && x.value.trim().length > 200 ){
            if(locale == "en"){ x.setCustomValidity("Description is too long"); }
            else { x.setCustomValidity("الوصف أطول من المتوقع"); }
            throw new Error("desc too long")
          }
        } catch (error) {
          document.getElementById("page6-form").reportValidity()
          document.getElementById(`page${i}-return`).style.display = "inline-block";
          pb1.style.display = "inline-block";
          pageSpinner.style.display = "none"
          pageSpinner.children[0].style.display = "none"
          pageSpinner.children[1].style.display = "none"
          return
        }

        nForm.locationDescription = document.getElementById("locationDescription") ? document.getElementById("locationDescription").value : ""

        formData[9] = ""
        formData[10] = ""

        fetch(defaultLink2 +`${'/reserveAppointment'}`, {
          redirect: "follow",
          method: "POST",
          body: JSON.stringify(nForm)
        }).then(async (response) => {
          pageSpinner.style.display = 'none';
          if (!response.ok) {
            throw Object.assign(new Error('Custom error message'), { response });
          }
          response = await response.json()
          if (response.success){
            let p1 = document.getElementById(`page${i}`);
            let p2 = document.getElementById(`page${i+1}`);
            p1.classList.remove("fadeIn");
            p1.classList.add("fadeOut");
            p2.classList.remove("fadeOut");
            p2.classList.add("fadeIn");
            setTimeout(() => {
              p1.style.display = "none";
              p2.style.display = "flex";
              pageSpinner.style.display = "none"
              if(confirm(`عزيزنا/عزيزتنا, ودك نتذكر بياناتك على هذا الجهاز لتسهيل الغسلات الجاية ؟`)){
                localStorage.setItem("name", document.getElementById("name").value);
                localStorage.setItem("mobile", countryCodeInput.getNumber().substring(1));
              }else {
                localStorage.removeItem("name")
                localStorage.removeItem("mobile")
              }
            }, "1000")
          }
        }).catch(async err => {
          console.log("Error:" + err.message);
          console.log(err.response);
          err.response =  await err.response.json()
          document.getElementById(`page${i}-return`).style.display = "inline-block";
          pb1.style.display = "inline-block";
          let p1 = document.getElementById(`page${i}`);
          p1.classList.remove("fadeIn");
          p1.classList.add("fadeOut");
          p1.style.display = "none"
          let p2 = document.getElementById(`page4`);
          p2.classList.remove("fadeOut");
          p2.classList.add("fadeIn");
          p2.style.display = "flex"
          let failAlert3 = document.getElementById(`fail-alert-3`)
          failAlert3.style.display = "block";
          if(locale == "en"){
            failAlert3.children[0].innerHTML = err.response.msgEN ? err.response.msgEN : "Unexpected error, Please contact us"
          }else if (locale == "ar") {
            failAlert3.children[0].innerHTML = err.response.msgAR ? err.response.msgAR : "عذرًا حصل خطأ غير متوقع الرجاء التواصل معنا"
          }
          failAlert3.children[2].innerHTML = ""
          $('#date').trigger('change');
          setTimeout(() => {
            p1.style.display = "none";
            p2.style.display = "flex";
          }, "1000")
        });
      };
    }
  } else {
    pb1.onclick = () => {
      p1.classList.remove("fadeIn");
      p1.classList.add("fadeOut");
      p2.classList.remove("fadeOut");
      p2.classList.add("fadeIn");
      setTimeout(() => {
        p1.style.display = "none";
        p2.style.display = "flex";
      }, "1000")
    }
  }
}


/* ===== the rest of your existing JS below remains unchanged ===== */

/* back buttons */
for (let i = 3; i < 7; i++) {
  let pb1 = document.getElementById(`page${i}-return`);
  let p1 = document.getElementById(`page${i}`);
  let p2 = (i === 4) ? document.getElementById(`page2`) : document.getElementById(`page${i-1}`);
  pb1.onclick = () => {
      p1.classList.remove("fadeIn");
      p1.classList.add("fadeOut");
      p2.classList.remove("fadeOut");
      p2.classList.add("fadeIn");
      setTimeout(() => {
          p1.style.display = "none";
          p2.style.display = "flex";
      }, "1000")
  }
}
 
    function resendData({submitFormData,pageSpinner,p1,p2,pb1,failAlert,failAlert3,failAlert4,failAlert5}){
      document.getElementById("resend-objects").style.display = "none"
      try {
      document.getElementById("page6-resend").remove()
      } catch (error) {
      }
      pageSpinner.style.display = "inline-block"
      failAlert.style.display = "none";
      callContent(`formSubmit&data=${submitFormData}`,(reply)=> {

              pageSpinner.style.display = 'none';
              if(reply.success){
                formData[10] = reply.signature
                startTimer(3*60,document.getElementById("resendTimer"))
              }else{
                failAlert.style.display = "block";
                failAlert.children[0].innerHTML = reply.msg
              }
             
            })
    }
    function choosedDate(time,date, i){
        formData[2] = date
        formData[3] = time
        nForm.date = date
        time = time.split(" ")
        console.log("7:00 AM");
        console.log(time);
        console.log(formData);
        let compare = "7:00 AM" == time
        console.log(compare);
        let parsedTime = DateTime.fromFormat(time.join(" "), "h:mm a");
        console.log(parsedTime);
        nForm.time =  parsedTime.toFormat("HH:mm");
        console.log(nForm);
        let p1 = document.getElementById(`page${i}`);
        let p2 = document.getElementById(`page${i+1}`);
        p1.classList.remove("fadeIn");
        p1.classList.add("fadeOut");
        p2.classList.remove("fadeOut");
        p2.classList.add("fadeIn");
        setTimeout(() => {
            p1.style.display = "none";
            p2.style.display = "flex";
        }, "1000")

    }

function checkUrlValidity() {
  const location = document.getElementById("googleMap");
  let reg = /^(https?:\/\/.)[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$/g;
  let locationValue = location.value.trim()
  if(locationValue == "" || locationValue == undefined){
    if(locale == "en"){
      location.setCustomValidity("Please Enter a URL");
    }else if (locale == "ar") {
      location.setCustomValidity("الرجاء ادخال رابط الموقع بالشكل الصحيح");
    }
    return false;
  }
  const regTest = reg.test(locationValue)
  if(  regTest == false){
    if(locale == "en"){
      location.setCustomValidity("Please Enter a URL");
    }else if (locale == "ar") {
      location.setCustomValidity("الرجاء ادخال رابط الموقع بالشكل الصحيح");
    }
    return false;
  }
  return true;
}
function checkNumberValidity() {
  const number = document.getElementById("mobile");
  const phoneNumber = countryCodeInput.getNumber().substring(1);
  const region = countryCodeInput.getSelectedCountryData().dialCode

  if (isNaN(phoneNumber) || !countryCodeInput.isValidNumber() || phoneNumber == "" ) { 
    const msg = errorMap[countryCodeInput.getValidationError()] || "رقم غير صحيح";
    if(locale == "en"){
      number.setCustomValidity("Please enter a Valid a phone number");
    }else {
      number.setCustomValidity(msg);
    }
    return false;
  }
  if(region == "966"){
   if(countryCodeInput.getNumber().substring(4,6) == "05"){
    if(locale == "en"){
      number.setCustomValidity("Please enter a Valid a phone number");
    }else {
      number.setCustomValidity("الرجاء ادخال رقم الهاتف بطريقة صحيحة");
    }
    return false;
   } 
  }

  number.setCustomValidity("");
  return true;
}



function servicesDropdownLoader2(data) {
  let categoriesID = Object.keys(data) // Array
  let categoriesNames = []
  for (id in categoriesID){
    if(locale == "en"){
      categoriesNames.push(data[categoriesID[id]].category.TS_category_english_name)
    }else if(locale == "ar"){
      categoriesNames.push(data[categoriesID[id]].category.TS_category_arabic_name)
    }
  } 
  add_dropdown_list(categoriesNames, categoriesID,"serviceCat", "disabled", "servicesCat")
  var parentElement = document.getElementById("service");
  parentElement.innerHTML=""
  document.getElementById('serviceCat').addEventListener('change',function(){
    let currentCategory = document.getElementById("serviceCat").value;
    let myServicesID = []
    let myServiceNames = []
    // Sort the services array by TS_service_id
    const sortedServices = data[currentCategory].services.sort((a, b) => a.TS_service_id - b.TS_service_id);

    for (let i = 0; i < sortedServices.length; i++) {
      const element = sortedServices[i];
      myServicesID.push(element.TS_service_id);
      
      if (locale === "en") {
        myServiceNames.push(element.TS_service_english_name);
      } else if (locale === "ar") {
        myServiceNames.push(element.TS_service_arabic_name);
      }
    }

    add_dropdown_list(myServiceNames,myServicesID,"service", "disabled", "services")// if ar lang
  })
  document.getElementById('service').addEventListener('change',function(){
        $('#date').trigger('change'); 
  })
  const event = new Event('change');
  document.getElementById('serviceCat').dispatchEvent(event);
}

  function setValuesForByLookUp(arrdropdown_2){
    //// console.log(arrdropdown_2)
    var tee = document.getElementById("serviceCat").value;
    var dependent_list = valueLookUp(arrdropdown_2,["Active",tee],[1,5],2) 
    var ar_list = valueLookUp(arrdropdown_2,["Active",tee],[1,5],3) 

    if(dependent_list.length!=0){

          add_dropdown_list(ar_list,dependent_list,"service", "disabled", "services")
    }
  
  }

    function add_dropdown_list(show_list,value_list,element_id,first_option_disabled, key=null){
      var parentElement = document.getElementById(element_id);
              parentElement.innerHTML="";
              var opti = document.createElement("option");

                  opti.text = show_list[0];
                  opti.value= value_list[0];
                  if( key != null){
                    opti.setAttribute("data-i18n-key", key)
                  }
                  opti.setAttribute("selected","selected");
                  parentElement.appendChild(opti);
          for(var i=1; i<value_list.length;i++){
              var opt = document.createElement("option");
                  opt.text = show_list[i];
                  opt.value= value_list[i];
                  if( key != null){
                    opt.setAttribute("data-i18n-key", key)
                  }
              parentElement.appendChild(opt);
              }
              const event = new Event('change');
              parentElement.dispatchEvent(event);
              // translate_container(parentElement)
 }
 function valueLookUp(listOfLookup,lookupValuesList,indexLookupValuesList,targetIndex){
  if(listOfLookup.length!=0 ){
      var lookuped_list = []
      for (var c = 0; c < listOfLookup.length; c++) {
        var success = false;
        for (var s = 0; s < lookupValuesList.length; s++) {
          if (lookupValuesList[s] == listOfLookup[c][indexLookupValuesList[s]]) {
            success = true;
          } else {
            success = false;
            break;
          }
        }
        if (success == true) {
          lookuped_list.push(listOfLookup[c][targetIndex]);
        }
      }

  return lookuped_list;
    
  }else{
    return [];
  }
}
 function getKeyByValue(object, value) {
            return Object.keys(object).find(key => 
                    object[key] === value);
        }

function handleSubmit(event) {
      event.preventDefault();
}
  
// ✅ Global Variables
let map, infoWindow, marker, polygon = null;
let position = "";
const prePosition = "https://www.google.com/maps/search/?api=1&query=";
let defaultLocation = { lat: 26.34165524787632, lng: 50.11524831545726 };
function myMap() {
  // ✅ Initialize Map
  map = new google.maps.Map(document.getElementById("googleMap"), {
    center: defaultLocation,
    zoom: 12,
    disableDoubleClickZoom: true, // prevent auto-zoom on dblclick
  });

  infoWindow = new google.maps.InfoWindow();

  // ✅ Create Marker (initially at default location)
  marker = new google.maps.Marker({
    position: defaultLocation,
    map: map,
    draggable: true,
    title: "اضغط أو اسحب لتحديد الموقع",
  });

  // ✅ Dragging (desktop & mobile)
  marker.addListener("dragend", function (e) {
    validateAndSetPosition(e.latLng);
  });

  // ✅ Single Click (desktop/laptop)
  map.addListener("click", function (e) {
    validateAndSetPosition(e.latLng);
  });

  // ✅ Double Click (desktop)
  map.addListener("dblclick", function (e) {
    e.stop(); // stop default zooming behavior
    validateAndSetPosition(e.latLng);
  });

  // ✅ Long Press (mobile-friendly → instead of double-tap)
  let pressTimer;
  map.addListener("mousedown", function (e) {
    // detect mouse hold (desktop fallback)
    pressTimer = setTimeout(() => validateAndSetPosition(e.latLng), 600);
  });
  map.addListener("mouseup", function () {
    clearTimeout(pressTimer);
  });

  map.addListener("touchstart", function (e) {
    // mobile hold
    pressTimer = setTimeout(() => validateAndSetPosition(e.latLng), 600);
  });
  map.addListener("touchend", function () {
    clearTimeout(pressTimer);
  });
  const dragHint = document.getElementById("drag-instructions");

  // Hide after 5 seconds automatically
  setTimeout(() => {
    dragHint.style.display = "none";
  }, 5000);

  // Hide immediately once user starts dragging the map
  map.addListener("dragstart", () => {
    dragHint.style.display = "none";
  });
}

// ✅ Update Position + Move Marker
function validateAndSetPosition(latLng) {
  if (polygon && !google.maps.geometry.poly.containsLocation(latLng, polygon)) {
    alert("⚠️ عذرًا، موقعك خارج نطاق الخدمة");
    position = ""; // ⛔️ منع الحجز
    infoWindow.setContent("🚫 موقع خارج الخدمة");
    infoWindow.open(map);
    return;
  }

  marker.setPosition(latLng);
  map.panTo(latLng);
  map.setZoom(17);
  position = `https://www.google.com/maps/search/?api=1&query=${latLng.lat()},${latLng.lng()}`;
  infoWindow.setContent("✅ تم تحديث موقعك هنا");
  infoWindow.open(map, marker);
}



// function myMap() {
//   map = new google.maps.Map(document.getElementById("googleMap"), {
//     center: defaultLocation,
//     zoom: 12,
//   });

//   infoWindow = new google.maps.InfoWindow();

//   marker = new google.maps.Marker({
//     position: defaultLocation,
//     map: map,
//     draggable: true, // ✅ السماح بالسحب اليدوي
//     title: "اضغط أو اسحب لتحديد الموقع",
//   });

//   // ✅ تحديث الإحداثيات عند سحب الماركر
//   marker.addListener("dragend", function (e) {
//     validateAndSetPosition(e.latLng);
//   });

//   // ✅ تحديث الإحداثيات عند النقر على الخريطة
//   map.addListener("click", function (e) {
//     validateAndSetPosition(e.latLng);
//   });
// }

// ✅ التحقق من أن الموقع داخل المنطقة وتحديث الماركر
// function validateAndSetPosition(latLng) {
//   if (polygon && google.maps.geometry.poly.containsLocation(latLng, polygon)) {
//     marker.setPosition(latLng);
//     map.panTo(latLng);
//     map.setZoom(17);
//     position = `${prePosition}${latLng.lat()},${latLng.lng()}`;
//     infoWindow.close();
//   } else {
//     alert("⚠️ عذرًا، موقعك خارج نطاق الخدمة");
//     position = "";
//   }
// }

function setBoundries() {
  const areaSelect = document.getElementById("area");
  const selectedArea = areaSelect.options[areaSelect.selectedIndex].text.trim();

  let APP_Location, polygonCoords;

  // ─── العزيزية - الخبر ───────────────
  if (selectedArea === "العزيزية - الخبر") {
    APP_Location = {
      north: 26.237892901838705,
      south: 26.15102181049713,
      west: 50.090294685184475,
      east: 50.234894203935546,
    };
    polygonCoords = [
      { lng: 50.215045355428195, lat: 26.219724394350184 },
      { lng: 50.2135291654911,   lat: 26.1870383495685 },
      { lng: 50.137875179099595, lat: 26.069703060741347 },
      { lng: 50.10628808282646,  lat: 26.15001891083389 },
      { lng: 50.143828288837895, lat: 26.21660551929113 },
      { lng: 50.19603263782255,  lat: 26.21897351180097 },
    ];
  }

  // ─── أجيال - أرامكو ───────────────
  else if (selectedArea === "أجيال - أرامكو") {
    APP_Location = {
      north: 26.289037271670438,
      south: 26.237817336683204,
      west: 50.05143566513406,
      east: 50.096905737932595,
    };
    polygonCoords = [
      { lng: 50.06256215323989, lat: 26.275519772515292 },
      { lng: 50.070562455580834, lat: 26.277608292466685 },
      { lng: 50.08514528516432,  lat: 26.257720425641132 },
      { lng: 50.06822454797902,  lat: 26.24524748257814 },
      { lng: 50.06115405632103,  lat: 26.262628935642045 },
      { lng: 50.05894452767791,  lat: 26.267950423932856 },
    ];
  }

  // ─── الدوحة و الدانة ───────────────
  else if (selectedArea === "الدوحة و الدانة") {
    APP_Location = {
      north: 26.37969652644046, 
      south: 26.277002257490476, 
      west: 50.11899625151807, 
      east: 50.195753733969404, 
    };
    polygonCoords = [
      { lng: 50.11488540829821, lat: 26.341056543806932 }, 
      { lng: 50.136645122501264, lat: 26.353671078060277 }, 
      { lng: 50.14577577434936,  lat: 26.363004767230812 }, 
      { lng: 50.178697561294584,  lat: 26.3329268498157454 }, 
      { lng: 50.17972636713662,  lat: 26.31448441448552 },
      { lng: 50.16468008169681,  lat: 26.29799900302895 }, 
    ];
  }

  else {
    alert("⚠️ المنطقة غير معرفة، يرجى الاختيار الصحيح");
    return;
  }

  // ─── تحديث الخريطة والـ Polygon ───────────────
  defaultLocation = {
    lat: (APP_Location.north + APP_Location.south) / 2,
    lng: (APP_Location.east + APP_Location.west) / 2,
  };

  if (polygon) polygon.setMap(map);

  polygon = new google.maps.Polygon({
    paths: polygonCoords,
    strokeColor: "#ff0000",
    strokeOpacity: 0.4,
    strokeWeight: 2,
    fillColor: "#00ff00",
    fillOpacity: 0.1,
  });
  polygon.setMap(map);

  map.setCenter(defaultLocation);
  map.setZoom(14);
  marker.setPosition(defaultLocation);
  position = `${prePosition}${defaultLocation.lat},${defaultLocation.lng}`;
}



// ✅ إظهار موقعي الحالي
// ✅ كشف موقعي وتحريك المؤشر تلقائياً
function detectMyLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      (pos) => {
        const userPos = new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude);

        // تحقق من النطاق أولاً
        if (polygon && !google.maps.geometry.poly.containsLocation(userPos, polygon)) {
          alert("⚠️ عذرًا، موقعك خارج نطاق الخدمة");
          return;
        }

        // تحريك الماركر للخريطة
        marker.setPosition(userPos);
        map.panTo(userPos);
        map.setZoom(17);

        // حفظ الرابط للاستخدام لاحقًا
        position = `${prePosition}${pos.coords.latitude},${pos.coords.longitude}`;
        infoWindow.close();
      },
      () => handleLocationError(true)
    );
  } else {
    handleLocationError(false);
  }
}

document.addEventListener("DOMContentLoaded", function () {
  const locationBtn = document.getElementById("show-my-location");
  if (locationBtn) {
    locationBtn.addEventListener("click", detectMyLocation);
  }
});

function handleLocationError(browserHasGeolocation) {
  infoWindow.setPosition(map.getCenter());
  infoWindow.setContent(
    browserHasGeolocation
      ? "⚠️ تعذر الحصول على موقعك. يرجى السماح بالوصول للموقع."
      : "⚠️ جهازك لا يدعم تحديد الموقع."
  );
  infoWindow.open(map);
}






	
function startTimer(duration, display) {
    document.getElementById("resend-objects").style.display = "block"
    try {
      document.getElementById("page6-resend").remove()
    } catch (error) {
      
    }
    var timer = duration, minutes, seconds;
    var time_counter = setInterval(function () {
        minutes = parseInt(timer / 60, 10);
        seconds = parseInt(timer % 60, 10);

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;
        console.log( minutes + ":" + seconds)
        display.textContent = minutes + ":" + seconds;
        timer = --timer 
        if (timer <0 ){
          clearInterval(time_counter)
          let timerElement = document.getElementById("resend-objects")
          let resendButton = document.createElement("button")
          resendButton.setAttribute("id","page6-resend") 
          resendButton.setAttribute("class","filter-button") 
          resendButton.setAttribute("type","button") 
          let resendSpan = document.createElement("span")
          resendSpan.textContent = "إعادة ارسال"
          resendButton.appendChild(resendSpan)
          timerElement.after(resendButton)
          timerElement.style.display = "none"
          resendButton.onclick = () => {
            resendData(mydata)
          }
          document.getElementById("page6-contact").style.display = "block";
        }
    }, 1000);
}

// ✅ دالة التحقق لرقم اللوحة (متوافقة مع 4 أرقام فقط وبدون Alerts)
function validatePlateNumber(input) {
  const v = input.value.replace(/\D/g, '').slice(0, 4);
  input.value = v;
  if (input.value.length==0) {
    input.setCustomValidity("رقم اللوحة يجب أن يكون من 1 إلى 4 أرقام");
	  return false;
  } else if (v && !/^\d{1,4}$/.test(v)) {
    input.setCustomValidity("رقم اللوحة يجب أن يكون من 1 إلى 4 أرقام");
	  return false;
  } else {
    input.setCustomValidity("");
	   return true;
  }
}

function updateLocationDescription() {
  const carBrand = document.getElementById("carBrand").value || "";
  const carName = document.getElementById("carName").value || "";
  const plateNumber = document.getElementById("plateNumber").value || "";
  const description = [carBrand, carName, plateNumber].filter(Boolean).join(", ");
  document.getElementById("locationDescription").value = description;
}

// ✅ تنظيف رسالة الخطأ عند الكتابة + قصر الإدخال على أرقام حتى 4 أرقام
document.getElementById('plateNumber').addEventListener('input', function(){
  this.value = this.value.replace(/\D/g, '').slice(0,4);
  this.setCustomValidity('');
  updateLocationDescription();
});

  
    // List of car brands
    const carBrands = [
      "Acura", "Alfa Romeo", "Aston Martin", "Audi", "Bentley", "BMW", "Bugatti", "Buick", 
      "Cadillac", "Chevrolet", "Chrysler", "Citroën", "Dacia", "Daewoo", "Daihatsu", "Dodge", 
      "Ferrari", "Fiat", "Ford", "Genesis", "GMC", "Haval", "Holden", "Honda", "Hummer", 
      "Hyundai", "Infiniti", "Isuzu", "Jaguar", "Jeep", "Kia", "Koenigsegg", "Lada", 
      "Lamborghini", "Lancia", "Land Rover", "Lexus", "Lincoln", "Lotus", "Maserati", 
      "Maybach", "Mazda", "McLaren", "Mercedes-Benz", "Mercury", "MG", "Mini", "Mitsubishi", 
      "Nissan", "Opel", "Pagani", "Peugeot", "Plymouth", "Pontiac", "Porsche", "RAM", 
      "Renault", "Rolls-Royce", "Saab", "Saturn", "Scion", "Seat", "Skoda", "Smart", 
      "SsangYong", "Subaru", "Suzuki", "Tata", "Tesla", "Toyota", "Volkswagen", 
      "Volvo", "Wiesmann", "Zotye"
    ];

    // Populate the car brand select dropdown
    carBrands.sort().forEach(brand => {
      $('#carBrand').append(`<option value="${brand}">${brand}</option>`);
    });

    // Enable Select2 for search functionality
    $(document).ready(function () {
      $('#carBrand').select2({
        placeholder: "Select a car brand",
        allowClear: true
      });
    });



// …all your existing code…

// Auto-transition from #page3 to #page4 after 5 seconds
;(function(){
  const page3 = document.getElementById('page3');
  const nextBtn = document.getElementById('page3-button');
  if (!page3 || !nextBtn) return;

  // Watch for style changes on page3
  const obs = new MutationObserver(() => {
    if (page3.style.display === 'flex') {
      // schedule only once per showing
      setTimeout(() => nextBtn.click(), 5000);
    }
  });
  obs.observe(page3, { attributes: true, attributeFilter: ['style'] });
})();

document.getElementById("rebook")?.addEventListener("click", function () {
  window.location.href = "https://www.spongnsoap.com/";
});

// document.getElementById('plateNumber').addEventListener('input', function(){
//   this.setCustomValidity('');
// });

</script>
<!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBBHLoO038vsCovHN-SLUgAXqexlA2v0_4&callback=myMap"></script> -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBBHLoO038vsCovHN-SLUgAXqexlA2v0_4&callback=myMap&libraries=geometry" async defer></script>

	<!-- Google tag (gtag.js) -->



</html>
